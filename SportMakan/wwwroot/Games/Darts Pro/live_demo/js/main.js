/*
 TweenJS
 Visit http://createjs.com/ for documentation, updates and examples.

 Copyright (c) 2010 gskinner.com, inc.

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
this.createjs=this.createjs||{};createjs.extend=function(a,c){function b(){this.constructor=a}b.prototype=c.prototype;return a.prototype=new b};this.createjs=this.createjs||{};createjs.promote=function(a,c){var b=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(b)||b.__proto__;if(d){b[(c+="_")+"constructor"]=d.constructor;for(var e in d)b.hasOwnProperty(e)&&"function"==typeof d[e]&&(b[c+e]=d[e])}return a};this.createjs=this.createjs||{};
createjs.deprecate=function(a,c){return function(){var b="Deprecated property or method '"+c+"'. See docs for info.";console&&(console.warn?console.warn(b):console.log(b));return a&&a.apply(this,arguments)}};this.createjs=this.createjs||{};
(function(){function a(a,c,e){this.type=a;this.currentTarget=this.target=null;this.eventPhase=0;this.bubbles=!!c;this.cancelable=!!e;this.timeStamp=(new Date).getTime();this.removed=this.immediatePropagationStopped=this.propagationStopped=this.defaultPrevented=!1}var c=a.prototype;c.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0};c.stopPropagation=function(){this.propagationStopped=!0};c.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=
!0};c.remove=function(){this.removed=!0};c.clone=function(){return new a(this.type,this.bubbles,this.cancelable)};c.set=function(a){for(var b in a)this[b]=a[b];return this};c.toString=function(){return"[Event (type="+this.type+")]"};createjs.Event=a})();this.createjs=this.createjs||{};
(function(){function a(){this._captureListeners=this._listeners=null}var c=a.prototype;a.initialize=function(a){a.addEventListener=c.addEventListener;a.on=c.on;a.removeEventListener=a.off=c.removeEventListener;a.removeAllEventListeners=c.removeAllEventListeners;a.hasEventListener=c.hasEventListener;a.dispatchEvent=c.dispatchEvent;a._dispatchEvent=c._dispatchEvent;a.willTrigger=c.willTrigger};c.addEventListener=function(a,c,e){var b=e?this._captureListeners=this._captureListeners||{}:this._listeners=
this._listeners||{};var d=b[a];d&&this.removeEventListener(a,c,e);(d=b[a])?d.push(c):b[a]=[c];return c};c.on=function(a,c,e,f,g,h){c.handleEvent&&(e=e||c,c=c.handleEvent);e=e||this;return this.addEventListener(a,function(a){c.call(e,a,g);f&&a.remove()},h)};c.removeEventListener=function(a,c,e){if(e=e?this._captureListeners:this._listeners){var b=e[a];if(b)for(var d=0,h=b.length;d<h;d++)if(b[d]==c){1==h?delete e[a]:b.splice(d,1);break}}};c.off=c.removeEventListener;c.removeAllEventListeners=function(a){a?
(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null};c.dispatchEvent=function(a,c,e){if("string"==typeof a){var b=this._listeners;if(!(c||b&&b[a]))return!0;a=new createjs.Event(a,c,e)}else a.target&&a.clone&&(a=a.clone());try{a.target=this}catch(g){}if(a.bubbles&&this.parent){e=this;for(c=[e];e.parent;)c.push(e=e.parent);b=c.length;for(e=b-1;0<=e&&!a.propagationStopped;e--)c[e]._dispatchEvent(a,1+(0==e));
for(e=1;e<b&&!a.propagationStopped;e++)c[e]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return!a.defaultPrevented};c.hasEventListener=function(a){var b=this._listeners,c=this._captureListeners;return!!(b&&b[a]||c&&c[a])};c.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a))return!0;b=b.parent}return!1};c.toString=function(){return"[EventDispatcher]"};c._dispatchEvent=function(a,c){var b,d,g=2>=c?this._captureListeners:this._listeners;if(a&&g&&(d=g[a.type])&&(b=d.length)){try{a.currentTarget=
this}catch(m){}try{a.eventPhase=c|0}catch(m){}a.removed=!1;d=d.slice();for(g=0;g<b&&!a.immediatePropagationStopped;g++){var h=d[g];h.handleEvent?h.handleEvent(a):h(a);a.removed&&(this.off(a.type,h,1==c),a.removed=!1)}}2===c&&this._dispatchEvent(a,2.1)};createjs.EventDispatcher=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ticker cannot be instantiated.";}a.RAF_SYNCHED="synched";a.RAF="raf";a.TIMEOUT="timeout";a.timingMode=null;a.maxDelta=0;a.paused=!1;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a._addEventListener=a.addEventListener;a.addEventListener=function(){!a._inited&&a.init();return a._addEventListener.apply(a,arguments)};a._inited=!1;a._startTime=0;a._pausedTime=
0;a._ticks=0;a._pausedTicks=0;a._interval=50;a._lastTime=0;a._times=null;a._tickTimes=null;a._timerId=null;a._raf=!0;a._setInterval=function(b){a._interval=b;a._inited&&a._setupTick()};a.setInterval=createjs.deprecate(a._setInterval,"Ticker.setInterval");a._getInterval=function(){return a._interval};a.getInterval=createjs.deprecate(a._getInterval,"Ticker.getInterval");a._setFPS=function(b){a._setInterval(1E3/b)};a.setFPS=createjs.deprecate(a._setFPS,"Ticker.setFPS");a._getFPS=function(){return 1E3/
a._interval};a.getFPS=createjs.deprecate(a._getFPS,"Ticker.getFPS");try{Object.defineProperties(a,{interval:{get:a._getInterval,set:a._setInterval},framerate:{get:a._getFPS,set:a._setFPS}})}catch(d){console.log(d)}a.init=function(){a._inited||(a._inited=!0,a._times=[],a._tickTimes=[],a._startTime=a._getTime(),a._times.push(a._lastTime=0),a.interval=a._interval)};a.reset=function(){if(a._raf){var b=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||
window.msCancelAnimationFrame;b&&b(a._timerId)}else clearTimeout(a._timerId);a.removeAllEventListeners("tick");a._timerId=a._times=a._tickTimes=null;a._startTime=a._lastTime=a._ticks=a._pausedTime=0;a._inited=!1};a.getMeasuredTickTime=function(b){var c=0,d=a._tickTimes;if(!d||1>d.length)return-1;b=Math.min(d.length,b||a._getFPS()|0);for(var g=0;g<b;g++)c+=d[g];return c/b};a.getMeasuredFPS=function(b){var c=a._times;if(!c||2>c.length)return-1;b=Math.min(c.length-1,b||a._getFPS()|0);return 1E3/((c[0]-
c[b])/b)};a.getTime=function(b){return a._startTime?a._getTime()-(b?a._pausedTime:0):-1};a.getEventTime=function(b){return a._startTime?(a._lastTime||a._startTime)-(b?a._pausedTime:0):-1};a.getTicks=function(b){return a._ticks-(b?a._pausedTicks:0)};a._handleSynch=function(){a._timerId=null;a._setupTick();a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()};a._handleRAF=function(){a._timerId=null;a._setupTick();a._tick()};a._handleTimeout=function(){a._timerId=null;a._setupTick();a._tick()};a._setupTick=
function(){if(null==a._timerId){var b=a.timingMode;if(b==a.RAF_SYNCHED||b==a.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c){a._timerId=c(b==a.RAF?a._handleRAF:a._handleSynch);a._raf=!0;return}}a._raf=!1;a._timerId=setTimeout(a._handleTimeout,a._interval)}};a._tick=function(){var b=a.paused,c=a._getTime(),f=c-a._lastTime;a._lastTime=c;a._ticks++;b&&(a._pausedTicks++,a._pausedTime+=
f);if(a.hasEventListener("tick")){var g=new createjs.Event("tick"),h=a.maxDelta;g.delta=h&&f>h?h:f;g.paused=b;g.time=c;g.runTime=c-a._pausedTime;a.dispatchEvent(g)}for(a._tickTimes.unshift(a._getTime()-c);100<a._tickTimes.length;)a._tickTimes.pop();for(a._times.unshift(c);100<a._times.length;)a._times.pop()};var c=window,b=c.performance.now||c.performance.mozNow||c.performance.msNow||c.performance.oNow||c.performance.webkitNow;a._getTime=function(){return(b&&b.call(c.performance)||(new Date).getTime())-
a._startTime};createjs.Ticker=a})();this.createjs=this.createjs||{};
(function(){function a(a){this.EventDispatcher_constructor();this.ignoreGlobalPause=!1;this.loop=0;this.bounce=this.reversed=this.useTicks=!1;this.timeScale=1;this.position=this.duration=0;this.rawPosition=-1;this._paused=!0;this._labelList=this._labels=this._parent=this._prev=this._next=null;a&&(this.useTicks=!!a.useTicks,this.ignoreGlobalPause=!!a.ignoreGlobalPause,this.loop=!0===a.loop?-1:a.loop||0,this.reversed=!!a.reversed,this.bounce=!!a.bounce,this.timeScale=a.timeScale||1,a.onChange&&this.addEventListener("change",
a.onChange),a.onComplete&&this.addEventListener("complete",a.onComplete))}var c=createjs.extend(a,createjs.EventDispatcher);c._setPaused=function(a){createjs.Tween._register(this,a);return this};c.setPaused=createjs.deprecate(c._setPaused,"AbstractTween.setPaused");c._getPaused=function(){return this._paused};c.getPaused=createjs.deprecate(c._getPaused,"AbstactTween.getPaused");c._getCurrentLabel=function(a){var b=this.getLabels();null==a&&(a=this.position);for(var c=0,f=b.length;c<f&&!(a<b[c].position);c++);
return 0===c?null:b[c-1].label};c.getCurrentLabel=createjs.deprecate(c._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(c,{paused:{set:c._setPaused,get:c._getPaused},currentLabel:{get:c._getCurrentLabel}})}catch(b){}c.advance=function(a,c){this.setPosition(this.rawPosition+a*this.timeScale,c)};c.setPosition=function(a,c,e,f){var b=this.duration,d=this.loop,m=this.rawPosition,k=0;0>a&&(a=0);if(0===b){var n=!0;if(-1!==m)return n}else{var l=a/b|0;k=a-l*b;(n=-1!==d&&a>=d*
b+b)&&(a=(k=b)*(l=d)+b);if(a===m)return n;!this.reversed!==!(this.bounce&&l%2)&&(k=b-k)}this.position=k;this.rawPosition=a;this._updatePosition(e,n);n&&(this.paused=!0);f&&f(this);c||this._runActions(m,a,e,!e&&-1===m);this.dispatchEvent("change");n&&this.dispatchEvent("complete")};c.calculatePosition=function(a){var b=this.duration,c=this.loop,f=0;if(0===b)return 0;-1!==c&&a>=c*b+b?(a=b,f=c):0>a?a=0:(f=a/b|0,a-=f*b);return!this.reversed!==!(this.bounce&&f%2)?b-a:a};c.getLabels=function(){var a=this._labelList;
if(!a){a=this._labelList=[];var c=this._labels,e;for(e in c)a.push({label:e,position:c[e]});a.sort(function(a,b){return a.position-b.position})}return a};c.setLabels=function(a){this._labels=a;this._labelList=null};c.addLabel=function(a,c){this._labels||(this._labels={});this._labels[a]=c;var b=this._labelList;if(b){for(var d=0,g=b.length;d<g&&!(c<b[d].position);d++);b.splice(d,0,{label:a,position:c})}};c.gotoAndPlay=function(a){this.paused=!1;this._goto(a)};c.gotoAndStop=function(a){this.paused=
!0;this._goto(a)};c.resolve=function(a){var b=Number(a);isNaN(b)&&(b=this._labels&&this._labels[a]);return b};c.toString=function(){return"[AbstractTween]"};c.clone=function(){throw"AbstractTween can not be cloned.";};c._init=function(a){a&&a.paused||(this.paused=!1);a&&null!=a.position&&this.setPosition(a.position)};c._updatePosition=function(a,c){};c._goto=function(a){a=this.resolve(a);null!=a&&this.setPosition(a,!1,!0)};c._runActions=function(a,c,e,f){if(this._actionHead||this.tweens){var b=this.duration,
d=this.reversed,m=this.bounce,k=this.loop,n,l,r;if(0===b){var p=n=l=r=0;d=m=!1}else p=a/b|0,n=c/b|0,l=a-p*b,r=c-n*b;-1!==k&&(n>k&&(r=b,n=k),p>k&&(l=b,p=k));if(e)return this._runActionsRange(r,r,e,f);if(p!==n||l!==r||e||f){-1===p&&(p=l=0);a=a<=c;c=p;do{k=c===p?l:a?0:b;var t=c===n?r:a?b:0;!d!==!(m&&c%2)&&(k=b-k,t=b-t);if((!m||c===p||k!==t)&&this._runActionsRange(k,t,e,f||c!==p&&!m))return!0;f=!1}while(a&&++c<=n||!a&&--c>=n)}}};c._runActionsRange=function(a,c,e,f){};createjs.AbstractTween=createjs.promote(a,
"EventDispatcher")})();this.createjs=this.createjs||{};
(function(){function a(b,d){this.AbstractTween_constructor(d);this.pluginData=null;this.target=b;this.passive=!1;this._stepTail=this._stepHead=new c(null,0,0,{},null,!0);this._stepPosition=0;this._injected=this._pluginIds=this._plugins=this._actionTail=this._actionHead=null;d&&(this.pluginData=d.pluginData,d.override&&a.removeTweens(b));this.pluginData||(this.pluginData={});this._init(d)}function c(a,b,c,d,m,k){this.next=null;this.prev=a;this.t=b;this.d=c;this.props=d;this.ease=m;this.passive=k;this.index=
a?a.index+1:0}function b(a,b,c,d,m){this.next=null;this.prev=a;this.t=b;this.d=0;this.scope=c;this.funct=d;this.params=m}var d=createjs.extend(a,createjs.AbstractTween);a.IGNORE={};a._tweens=[];a._plugins=null;a._tweenHead=null;a._tweenTail=null;a.get=function(b,c){return new a(b,c)};a.tick=function(b,c){for(var e=a._tweenHead;e;){var d=e._next;c&&!e.ignoreGlobalPause||e._paused||e.advance(e.useTicks?1:b);e=d}};a.handleEvent=function(a){"tick"===a.type&&this.tick(a.delta,a.paused)};a.removeTweens=
function(b){if(b.tweenjs_count){for(var c=a._tweenHead;c;){var e=c._next;c.target===b&&a._register(c,!0);c=e}b.tweenjs_count=0}};a.removeAllTweens=function(){for(var b=a._tweenHead;b;){var c=b._next;b._paused=!0;b.target&&(b.target.tweenjs_count=0);b._next=b._prev=null;b=c}a._tweenHead=a._tweenTail=null};a.hasActiveTweens=function(b){return b?!!b.tweenjs_count:!!a._tweenHead};a._installPlugin=function(b){for(var c=b.priority=b.priority||0,d=a._plugins=a._plugins||[],e=0,m=d.length;e<m&&!(c<d[e].priority);e++);
d.splice(e,0,b)};a._register=function(b,c){var d=b.target;if(!c&&b._paused)d&&(d.tweenjs_count=d.tweenjs_count?d.tweenjs_count+1:1),(d=a._tweenTail)?(a._tweenTail=d._next=b,b._prev=d):a._tweenHead=a._tweenTail=b,!a._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",a),a._inited=!0);else if(c&&!b._paused){d&&d.tweenjs_count--;d=b._next;var e=b._prev;d?d._prev=e:a._tweenTail=e;e?e._next=d:a._tweenHead=d;b._next=b._prev=null}b._paused=c};d.wait=function(a,b){0<a&&this._addStep(+a,this._stepTail.props,
null,b);return this};d.to=function(a,b,c){if(null==b||0>b)b=0;b=this._addStep(+b,null,c);this._appendProps(a,b);return this};d.label=function(a){this.addLabel(a,this.duration);return this};d.call=function(a,b,c){return this._addAction(c||this.target,a,b||[this])};d.set=function(a,b){return this._addAction(b||this.target,this._set,[a])};d.play=function(a){return this._addAction(a||this,this._set,[{paused:!1}])};d.pause=function(a){return this._addAction(a||this,this._set,[{paused:!0}])};d.w=d.wait;
d.t=d.to;d.c=d.call;d.s=d.set;d.toString=function(){return"[Tween]"};d.clone=function(){throw"Tween can not be cloned.";};d._addPlugin=function(a){var b=this._pluginIds||(this._pluginIds={}),c=a.ID;if(c&&!b[c]){b[c]=!0;b=this._plugins||(this._plugins=[]);c=a.priority||0;for(var d=0,e=b.length;d<e;d++)if(c<b[d].priority){b.splice(d,0,a);return}b.push(a)}};d._updatePosition=function(a,b){var c=this._stepHead.next,d=this.position,e=this.duration;if(this.target&&c){for(var f=c.next;f&&f.t<=d;)c=c.next,
f=c.next;this._updateTargetProps(c,b?0===e?1:d/e:(d-c.t)/c.d,b)}this._stepPosition=c?d-c.t:0};d._updateTargetProps=function(b,c,d){if(!(this.passive=!!b.passive)){var e,f=b.prev.props,g=b.props;if(e=b.ease)c=e(c,0,1,1);e=this._plugins;var n;a:for(n in f){var l=f[n];var r=g[n];l=l!==r&&"number"===typeof l?l+(r-l)*c:1<=c?r:l;if(e){r=0;for(var p=e.length;r<p;r++){var t=e[r].change(this,b,n,l,c,d);if(t===a.IGNORE)continue a;void 0!==t&&(l=t)}}this.target[n]=l}}};d._runActionsRange=function(a,b,c,d){var e=
(c=a>b)?this._actionTail:this._actionHead,f=b,h=a;c&&(f=a,h=b);for(var g=this.position;e;){var r=e.t;if(r===b||r>h&&r<f||d&&r===a)if(e.funct.apply(e.scope,e.params),g!==this.position)return!0;e=c?e.prev:e.next}};d._appendProps=function(b,c,d){var e=this._stepHead.props,f=this.target,g=a._plugins,n,l,r=c.prev,p=r.props,t=c.props||(c.props=this._cloneProps(p)),u={};for(n in b)if(b.hasOwnProperty(n)&&(u[n]=t[n]=b[n],void 0===e[n])){var x=void 0;if(g)for(l=g.length-1;0<=l;l--){var B=g[l].init(this,n,
x);void 0!==B&&(x=B);if(x===a.IGNORE){delete t[n];delete u[n];break}}x!==a.IGNORE&&(void 0===x&&(x=f[n]),p[n]=void 0===x?null:x)}for(n in u){var I;for(b=r;(I=b)&&(b=I.prev);)if(b.props!==I.props){if(void 0!==b.props[n])break;b.props[n]=p[n]}}if(!1!==d&&(g=this._plugins))for(l=g.length-1;0<=l;l--)g[l].step(this,c,u);if(d=this._injected)this._injected=null,this._appendProps(d,c,!1)};d._injectProp=function(a,b){(this._injected||(this._injected={}))[a]=b};d._addStep=function(a,b,d,h){b=new c(this._stepTail,
this.duration,a,b,d,h||!1);this.duration+=a;return this._stepTail=this._stepTail.next=b};d._addAction=function(a,c,d){a=new b(this._actionTail,this.duration,a,c,d);this._actionTail?this._actionTail.next=a:this._actionHead=a;this._actionTail=a;return this};d._set=function(a){for(var b in a)this[b]=a[b]};d._cloneProps=function(a){var b={},c;for(c in a)b[c]=a[c];return b};createjs.Tween=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(a){if(a instanceof Array||null==a&&1<arguments.length){var b=a;var c=arguments[1];a=arguments[2]}else a&&(b=a.tweens,c=a.labels);this.AbstractTween_constructor(a);this.tweens=[];b&&this.addTween.apply(this,b);this.setLabels(c);this._init(a)}var c=createjs.extend(a,createjs.AbstractTween);c.addTween=function(a){a._parent&&a._parent.removeTween(a);var b=arguments.length;if(1<b){for(var c=0;c<b;c++)this.addTween(arguments[c]);return arguments[b-1]}if(0===b)return null;this.tweens.push(a);
a._parent=this;a.paused=!0;b=a.duration;0<a.loop&&(b*=a.loop+1);b>this.duration&&(this.duration=b);0<=this.rawPosition&&a.setPosition(this.rawPosition);return a};c.removeTween=function(a){var b=arguments.length;if(1<b){for(var c=!0,f=0;f<b;f++)c=c&&this.removeTween(arguments[f]);return c}if(0===b)return!0;b=this.tweens;for(f=b.length;f--;)if(b[f]===a)return b.splice(f,1),a._parent=null,a.duration>=this.duration&&this.updateDuration(),!0;return!1};c.updateDuration=function(){for(var a=this.duration=
0,c=this.tweens.length;a<c;a++){var e=this.tweens[a],f=e.duration;0<e.loop&&(f*=e.loop+1);f>this.duration&&(this.duration=f)}};c.toString=function(){return"[Timeline]"};c.clone=function(){throw"Timeline can not be cloned.";};c._updatePosition=function(a,c){for(var b=this.position,d=0,g=this.tweens.length;d<g;d++)this.tweens[d].setPosition(b,!0,a)};c._runActionsRange=function(a,c,e,f){for(var b=this.position,d=0,m=this.tweens.length;d<m;d++)if(this.tweens[d]._runActions(a,c,e,f),b!==this.position)return!0};
createjs.Timeline=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ease cannot be instantiated.";}a.linear=function(a){return a};a.none=a.linear;a.get=function(a){-1>a?a=-1:1<a&&(a=1);return function(b){return 0==a?b:0>a?b*(b*-a+1+a):b*((2-b)*a+(1-a))}};a.getPowIn=function(a){return function(b){return Math.pow(b,a)}};a.getPowOut=function(a){return function(b){return 1-Math.pow(1-b,a)}};a.getPowInOut=function(a){return function(b){return 1>(b*=2)?.5*Math.pow(b,a):1-.5*Math.abs(Math.pow(2-b,a))}};a.quadIn=a.getPowIn(2);a.quadOut=a.getPowOut(2);
a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)};a.sineOut=function(a){return Math.sin(a*Math.PI/2)};a.sineInOut=function(a){return-.5*(Math.cos(Math.PI*a)-1)};a.getBackIn=function(a){return function(b){return b*b*((a+1)*b-a)}};
a.backIn=a.getBackIn(1.7);a.getBackOut=function(a){return function(b){return--b*b*((a+1)*b+a)+1}};a.backOut=a.getBackOut(1.7);a.getBackInOut=function(a){a*=1.525;return function(b){return 1>(b*=2)?.5*b*b*((a+1)*b-a):.5*((b-=2)*b*((a+1)*b+a)+2)}};a.backInOut=a.getBackInOut(1.7);a.circIn=function(a){return-(Math.sqrt(1-a*a)-1)};a.circOut=function(a){return Math.sqrt(1- --a*a)};a.circInOut=function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)};a.bounceIn=function(c){return 1-
a.bounceOut(1-c)};a.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375};a.bounceInOut=function(c){return.5>c?.5*a.bounceIn(2*c):.5*a.bounceOut(2*c-1)+.5};a.getElasticIn=function(a,b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=b/c*Math.asin(1/a);return-(a*Math.pow(2,10*--d)*Math.sin((d-e)*c/b))}};a.elasticIn=a.getElasticIn(1,.3);a.getElasticOut=function(a,b){var c=2*Math.PI;
return function(d){return 0==d||1==d?d:a*Math.pow(2,-10*d)*Math.sin((d-b/c*Math.asin(1/a))*c/b)+1}};a.elasticOut=a.getElasticOut(1,.3);a.getElasticInOut=function(a,b){var c=2*Math.PI;return function(d){var e=b/c*Math.asin(1/a);return 1>(d*=2)?-.5*a*Math.pow(2,10*--d)*Math.sin((d-e)*c/b):a*Math.pow(2,-10*--d)*Math.sin((d-e)*c/b)*.5+1}};a.elasticInOut=a.getElasticInOut(1,.3*1.5);createjs.Ease=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"MotionGuidePlugin cannot be instantiated.";}a.priority=0;a.ID="MotionGuide";a.install=function(){createjs.Tween._installPlugin(a);return createjs.Tween.IGNORE};a.init=function(c,b,d){"guide"==b&&c._addPlugin(a)};a.step=function(c,b,d){for(var e in d)if("guide"===e){var f=b.props.guide,g=a._solveGuideData(d.guide,f);f.valid=!g;var h=f.endData;c._injectProp("x",h.x);c._injectProp("y",h.y);if(g||!f.orient)break;f.startOffsetRot=(void 0===b.prev.props.rotation?c.target.rotation||
0:b.prev.props.rotation)-f.startData.rotation;if("fixed"==f.orient)f.endAbsRot=h.rotation+f.startOffsetRot,f.deltaRotation=0;else{g=void 0===d.rotation?c.target.rotation||0:d.rotation;h=g-f.endData.rotation-f.startOffsetRot;var m=h%360;f.endAbsRot=g;switch(f.orient){case "auto":f.deltaRotation=h;break;case "cw":f.deltaRotation=(m+360)%360+360*Math.abs(h/360|0);break;case "ccw":f.deltaRotation=(m-360)%360+-360*Math.abs(h/360|0)}}c._injectProp("rotation",f.endAbsRot)}};a.change=function(c,b,d,e,f,g){if((e=
b.props.guide)&&b.props!==b.prev.props&&e!==b.prev.props.guide){if("guide"===d&&!e.valid||"x"==d||"y"==d||"rotation"===d&&e.orient)return createjs.Tween.IGNORE;a._ratioToPositionData(f,e,c.target)}};a.debug=function(c,b,d){c=c.guide||c;var e=a._findPathProblems(c);e&&console.error("MotionGuidePlugin Error found: \n"+e);if(!b)return e;var f,g=c.path,h=g.length;b.save();b.lineCap="round";b.lineJoin="miter";b.beginPath();b.moveTo(g[0],g[1]);for(f=2;f<h;f+=4)b.quadraticCurveTo(g[f],g[f+1],g[f+2],g[f+
3]);b.strokeStyle="black";b.lineWidth=4.5;b.stroke();b.strokeStyle="white";b.lineWidth=3;b.stroke();b.closePath();g=d.length;if(d&&g){h={};var m={};a._solveGuideData(c,h);for(f=0;f<g;f++)h.orient="fixed",a._ratioToPositionData(d[f],h,m),b.beginPath(),b.moveTo(m.x,m.y),b.lineTo(m.x+9*Math.cos(.0174533*m.rotation),m.y+9*Math.sin(.0174533*m.rotation)),b.strokeStyle="black",b.lineWidth=4.5,b.stroke(),b.strokeStyle="red",b.lineWidth=3,b.stroke(),b.closePath()}b.restore();return e};a._solveGuideData=function(c,
b){var d;if(d=a.debug(c))return d;var e=b.path=c.path;b.orient=c.orient;b.subLines=[];b.totalLength=0;b.startOffsetRot=0;b.deltaRotation=0;b.startData={ratio:0};b.endData={ratio:1};b.animSpan=1;var f=e.length,g,h={};var m=e[0];var k=e[1];for(d=2;d<f;d+=4){var n=e[d];var l=e[d+1];var r=e[d+2];var p=e[d+3];var t={weightings:[],estLength:0,portion:0},u=m;var x=k;for(g=1;10>=g;g++)a._getParamsForCurve(m,k,n,l,r,p,g/10,!1,h),u=h.x-u,x=h.y-x,x=Math.sqrt(u*u+x*x),t.weightings.push(x),t.estLength+=x,u=h.x,
x=h.y;b.totalLength+=t.estLength;for(g=0;10>g;g++)x=t.estLength,t.weightings[g]/=x;b.subLines.push(t);m=r;k=p}x=b.totalLength;e=b.subLines.length;for(d=0;d<e;d++)b.subLines[d].portion=b.subLines[d].estLength/x;d=isNaN(c.start)?0:c.start;e=isNaN(c.end)?1:c.end;a._ratioToPositionData(d,b,b.startData);a._ratioToPositionData(e,b,b.endData);b.startData.ratio=d;b.endData.ratio=e;b.animSpan=b.endData.ratio-b.startData.ratio};a._ratioToPositionData=function(c,b,d){var e=b.subLines,f,g=0,h=c*b.animSpan+b.startData.ratio;
var m=e.length;for(f=0;f<m;f++){var k=e[f].portion;if(g+k>=h){var n=f;break}g+=k}void 0===n&&(n=m-1,g-=k);e=e[n].weightings;var l=k;m=e.length;for(f=0;f<m;f++){k=e[f]*l;if(g+k>=h)break;g+=k}n=4*n+2;m=b.path;a._getParamsForCurve(m[n-2],m[n-1],m[n],m[n+1],m[n+2],m[n+3],f/10+(h-g)/k*.1,b.orient,d);b.orient&&(d.rotation=.99999<=c&&1.00001>=c&&void 0!==b.endAbsRot?b.endAbsRot:d.rotation+(b.startOffsetRot+c*b.deltaRotation));return d};a._getParamsForCurve=function(a,b,d,e,f,g,h,m,k){var c=1-h;k.x=c*c*a+
2*c*h*d+h*h*f;k.y=c*c*b+2*c*h*e+h*h*g;m&&(k.rotation=57.2957795*Math.atan2((e-b)*c+(g-e)*h,(d-a)*c+(f-d)*h))};a._findPathProblems=function(a){var b=a.path,c=b&&b.length||0;if(6>c||(c-2)%4)return"\tCannot parse 'path' array due to invalid number of entries in path. There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n"+("Only [ "+c+" ] values found. Expected: "+
Math.max(4*Math.ceil((c-2)/4)+2,6));for(var e=0;e<c;e++)if(isNaN(b[e]))return"All data in path array must be numeric";b=a.start;if(isNaN(b)&&void 0!==b)return"'start' out of bounds. Expected 0 to 1, got: "+b;b=a.end;if(isNaN(b)&&void 0!==b)return"'end' out of bounds. Expected 0 to 1, got: "+b;if((a=a.orient)&&"fixed"!=a&&"auto"!=a&&"cw"!=a&&"ccw"!=a)return'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+a};createjs.MotionGuidePlugin=a})();
this.createjs=this.createjs||{};(function(){var a=createjs.TweenJS=createjs.TweenJS||{};a.version="1.0.0";a.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"})();
(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},c="undefined"!==typeof module&&module.exports,b="undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,d=function(){for(var b,c=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),
"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],d=0,e=c.length,f={};d<e;d++)if((b=c[d])&&b[1]in a){for(d=0;d<b.length;d++)f[c[0][d]]=
b[d];return f}return!1}(),e={change:d.fullscreenchange,error:d.fullscreenerror},f={request:function(c){var e=d.requestFullscreen;c=c||a.documentElement;if(/5\.1[.\d]* Safari/.test(navigator.userAgent))c[e]();else c[e](b&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){a[d.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(a){this.on("change",a)},onerror:function(a){this.on("error",a)},on:function(b,c){var d=e[b];d&&a.addEventListener(d,c,!1)},off:function(b,
c){var d=e[b];d&&a.removeEventListener(d,c,!1)},raw:d};d?(Object.defineProperties(f,{isFullscreen:{get:function(){return!!a[d.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[d.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!a[d.fullscreenEnabled]}}}),c?module.exports=f:window.screenfull=f):c?module.exports=!1:window.screenfull=!1})();
(function(){function a(a){a=String(a);return a.charAt(0).toUpperCase()+a.slice(1)}function c(a,b){var c=-1,e=a?a.length:0;if("number"==typeof e&&-1<e&&e<=p)for(;++c<e;)b(a[c],c,a);else d(a,b)}function b(b){b=String(b).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(b)?b:a(b)}function d(a,b){for(var c in a)u.call(a,c)&&b(a[c],c,a)}function e(b){return null==b?a(b):x.call(b).slice(8,-1)}function f(a,b){var c=null!=a?typeof a[b]:"number";return!/^(?:boolean|number|string|undefined)$/.test(c)&&
("object"==c?!!a[b]:!0)}function g(a){return String(a).replace(/([ -])(?!$)/g,"$1?")}function h(a,b){var d=null;c(a,function(c,e){d=b(d,c,e,a)});return d}function m(a){function c(c){return h(c,function(c,d){var e=d.pattern||g(d);!c&&(c=RegExp("\\b"+e+" *\\d+[.\\w_]*","i").exec(a)||RegExp("\\b"+e+" *\\w+-[\\w]*","i").exec(a)||RegExp("\\b"+e+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(a))&&((c=String(d.label&&!RegExp(e,"i").test(d.label)?d.label:c).split("/"))[1]&&!/[\d.]+/.test(c[0])&&(c[0]+=
" "+c[1]),d=d.label||d,c=b(c[0].replace(RegExp(e,"i"),d).replace(RegExp("; *(?:"+d+"[_-])?","i")," ").replace(RegExp("("+d+")[-_.]?(\\w)","i"),"$1 $2")));return c})}function k(b){return h(b,function(b,c){return b||(RegExp(c+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(a)||0)[1]||null})}var l=n,p=a&&"object"==typeof a&&"String"!=e(a);p&&(l=a,a=null);var r=l.navigator||{},u=r.userAgent||"";a||(a=u);var B=p?!!r.likeChrome:/\bChrome\b/.test(a)&&!/internal|\n/i.test(x.toString()),
I=p?"Object":"ScriptBridgingProxyObject",Q=p?"Object":"Environment",T=p&&l.java?"JavaPackage":e(l.java),E=p?"Object":"RuntimeObject";Q=(T=/\bJava/.test(T)&&l.java)&&e(l.environment)==Q;var D=T?"a":"\u03b1",A=T?"b":"\u03b2",V=l.document||{},G=l.operamini||l.opera,N=t.test(N=p&&G?G["[[Class]]"]:e(G))?N:G=null,q,R=a;p=[];var H=null,P=a==u;u=P&&G&&"function"==typeof G.version&&G.version();var C=function(b){return h(b,function(b,c){return b||RegExp("\\b"+(c.pattern||g(c))+"\\b","i").exec(a)&&(c.label||
c)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),v=function(b){return h(b,function(b,c){return b||RegExp("\\b"+(c.pattern||g(c))+"\\b","i").exec(a)&&(c.label||c)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),z=c([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),K=function(b){return h(b,function(b,c,d){return b||(c[z]||c[/^[a-z]+(?: +[a-z]+\b)*/i.exec(z)]||RegExp("\\b"+g(d)+"(?:\\b|\\w*\\d)","i").exec(a))&&d})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),w=function(c){return h(c,function(c,d){var e=d.pattern||g(d);if(!c&&(c=RegExp("\\b"+e+"(?:/[\\d.]+|[ \\w.]*)","i").exec(a))){var f=c,h=d.label||d,l={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};e&&h&&/^Win/i.test(f)&&!/^Windows Phone /i.test(f)&&(l=l[/[\d.]+$/.exec(f)])&&(f="Windows "+l);f=String(f);e&&h&&(f=f.replace(RegExp(e,"i"),h));c=f=b(f.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/,
" $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return c})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac",
"Windows 98;","Windows "]);C&&(C=[C]);K&&!z&&(z=c([K]));if(q=/\bGoogle TV\b/.exec(z))z=q[0];/\bSimulator\b/i.test(a)&&(z=(z?z+" ":"")+"Simulator");"Opera Mini"==v&&/\bOPiOS\b/.test(a)&&p.push("running in Turbo/Uncompressed mode");"IE"==v&&/\blike iPhone OS\b/.test(a)?(q=m(a.replace(/like iPhone OS/,"")),K=q.manufacturer,z=q.product):/^iP/.test(z)?(v||(v="Safari"),w="iOS"+((q=/ OS ([\d_]+)/i.exec(a))?" "+q[1].replace(/_/g,"."):"")):"Konqueror"!=v||/buntu/i.test(w)?K&&"Google"!=K&&(/Chrome/.test(v)&&
!/\bMobile Safari\b/i.test(a)||/\bVita\b/.test(z))||/\bAndroid\b/.test(w)&&/^Chrome/.test(v)&&/\bVersion\//i.test(a)?(v="Android Browser",w=/\bAndroid\b/.test(w)?w:"Android"):"Silk"==v?(/\bMobi/i.test(a)||(w="Android",p.unshift("desktop mode")),/Accelerated *= *true/i.test(a)&&p.unshift("accelerated")):"PaleMoon"==v&&(q=/\bFirefox\/([\d.]+)\b/.exec(a))?p.push("identifying as Firefox "+q[1]):"Firefox"==v&&(q=/\b(Mobile|Tablet|TV)\b/i.exec(a))?(w||(w="Firefox OS"),z||(z=q[1])):!v||(q=!/\bMinefield\b/i.test(a)&&
/\b(?:Firefox|Safari)\b/.exec(v))?(v&&!z&&/[\/,]|^[^(]+?\)/.test(a.slice(a.indexOf(q+"/")+8))&&(v=null),(q=z||K||w)&&(z||K||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(w))&&(v=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(w)?w:q)+" Browser")):"Electron"==v&&(q=(/\bChrome\/([\d.]+)\b/.exec(a)||0)[1])&&p.push("Chromium "+q):w="Kubuntu";u||(u=k(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",g(v),"(?:Firefox|Minefield|NetFront)"]));
if(q="iCab"==C&&3<parseFloat(u)&&"WebKit"||/\bOpera\b/.test(v)&&(/\bOPR\b/.test(a)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(a)&&!/^(?:Trident|EdgeHTML)$/.test(C)&&"WebKit"||!C&&/\bMSIE\b/i.test(a)&&("Mac OS"==w?"Tasman":"Trident")||"WebKit"==C&&/\bPlayStation\b(?! Vita\b)/i.test(v)&&"NetFront")C=[q];"IE"==v&&(q=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(a)||0)[1])?(v+=" Mobile",w="Windows Phone "+(/\+$/.test(q)?q:q+".x"),p.unshift("desktop mode")):/\bWPDesktop\b/i.test(a)?(v="IE Mobile",w="Windows Phone 8.x",
p.unshift("desktop mode"),u||(u=(/\brv:([\d.]+)/.exec(a)||0)[1])):"IE"!=v&&"Trident"==C&&(q=/\brv:([\d.]+)/.exec(a))&&(v&&p.push("identifying as "+v+(u?" "+u:"")),v="IE",u=q[1]);if(P){if(f(l,"global"))if(T&&(q=T.lang.System,R=q.getProperty("os.arch"),w=w||q.getProperty("os.name")+" "+q.getProperty("os.version")),Q){try{u=l.require("ringo/engine").version.join("."),v="RingoJS"}catch(X){(q=l.system)&&q.global.system==l.system&&(v="Narwhal",w||(w=q[0].os||null))}v||(v="Rhino")}else"object"==typeof l.process&&
!l.process.browser&&(q=l.process)&&("object"==typeof q.versions&&("string"==typeof q.versions.electron?(p.push("Node "+q.versions.node),v="Electron",u=q.versions.electron):"string"==typeof q.versions.nw&&(p.push("Chromium "+u,"Node "+q.versions.node),v="NW.js",u=q.versions.nw)),v||(v="Node.js",R=q.arch,w=q.platform,u=(u=/[\d.]+/.exec(q.version))?u[0]:null));else e(q=l.runtime)==I?(v="Adobe AIR",w=q.flash.system.Capabilities.os):e(q=l.phantom)==E?(v="PhantomJS",u=(q=q.version||null)&&q.major+"."+q.minor+
"."+q.patch):"number"==typeof V.documentMode&&(q=/\bTrident\/(\d+)/i.exec(a))?(u=[u,V.documentMode],(q=+q[1]+4)!=u[1]&&(p.push("IE "+u[1]+" mode"),C&&(C[1]=""),u[1]=q),u="IE"==v?String(u[1].toFixed(1)):u[0]):"number"==typeof V.documentMode&&/^(?:Chrome|Firefox)\b/.test(v)&&(p.push("masking as "+v+" "+u),v="IE",u="11.0",C=["Trident"],w="Windows");w=w&&b(w)}u&&(q=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(u)||/(?:alpha|beta)(?: ?\d)?/i.exec(a+";"+(P&&r.appMinorVersion))||/\bMinefield\b/i.test(a)&&
"a")&&(H=/b/i.test(q)?"beta":"alpha",u=u.replace(RegExp(q+"\\+?$"),"")+("beta"==H?A:D)+(/\d+\+?/.exec(q)||""));if("Fennec"==v||"Firefox"==v&&/\b(?:Android|Firefox OS)\b/.test(w))v="Firefox Mobile";else if("Maxthon"==v&&u)u=u.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(z))"Xbox 360"==z&&(w=null),"Xbox 360"==z&&/\bIEMobile\b/.test(a)&&p.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(v)&&(!v||z||/Browser|Mobi/.test(v))||"Windows CE"!=w&&!/Mobi/i.test(a))if("IE"==v&&P)try{null===l.external&&
p.unshift("platform preview")}catch(X){p.unshift("embedded")}else(/\bBlackBerry\b/.test(z)||/\bBB10\b/.test(a))&&(q=(RegExp(z.replace(/ +/g," *")+"/([.\\d]+)","i").exec(a)||0)[1]||u)?(q=[q,/BB10/.test(a)],w=(q[1]?(z=null,K="BlackBerry"):"Device Software")+" "+q[0],u=null):this!=d&&"Wii"!=z&&(P&&G||/Opera/.test(v)&&/\b(?:MSIE|Firefox)\b/i.test(a)||"Firefox"==v&&/\bOS X (?:\d+\.){2,}/.test(w)||"IE"==v&&(w&&!/^Win/.test(w)&&5.5<u||/\bWindows XP\b/.test(w)&&8<u||8==u&&!/\bTrident\b/.test(a)))&&!t.test(q=
m.call(d,a.replace(t,"")+";"))&&q.name&&(q="ing as "+q.name+((q=q.version)?" "+q:""),t.test(v)?(/\bIE\b/.test(q)&&"Mac OS"==w&&(w=null),q="identify"+q):(q="mask"+q,v=N?b(N.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(q)&&(w=null),P||(u=null)),C=["Presto"],p.push(q));else v+=" Mobile";if(q=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(a)||0)[1]){q=[parseFloat(q.replace(/\.(\d)$/,".0$1")),q];if("Safari"==v&&"+"==q[1].slice(-1))v="WebKit Nightly",H="alpha",u=q[1].slice(0,-1);else if(u==q[1]||u==(q[2]=
(/\bSafari\/([\d.]+\+?)/i.exec(a)||0)[1]))u=null;q[1]=(/\bChrome\/([\d.]+)/i.exec(a)||0)[1];537.36==q[0]&&537.36==q[2]&&28<=parseFloat(q[1])&&"WebKit"==C&&(C=["Blink"]);P&&(B||q[1])?(C&&(C[1]="like Chrome"),q=q[1]||(q=q[0],530>q?1:532>q?2:532.05>q?3:533>q?4:534.03>q?5:534.07>q?6:534.1>q?7:534.13>q?8:534.16>q?9:534.24>q?10:534.3>q?11:535.01>q?12:535.02>q?"13+":535.07>q?15:535.11>q?16:535.19>q?17:536.05>q?18:536.1>q?19:537.01>q?20:537.11>q?"21+":537.13>q?23:537.18>q?24:537.24>q?25:537.36>q?26:"Blink"!=
C?"27":"28")):(C&&(C[1]="like Safari"),q=(q=q[0],400>q?1:500>q?2:526>q?3:533>q?4:534>q?"4+":535>q?5:537>q?6:538>q?7:601>q?8:"8"));C&&(C[1]+=" "+(q+="number"==typeof q?".x":/[.+]/.test(q)?"":"+"));"Safari"==v&&(!u||45<parseInt(u))&&(u=q)}"Opera"==v&&(q=/\bzbov|zvav$/.exec(w))?(v+=" ",p.unshift("desktop mode"),"zvav"==q?(v+="Mini",u=null):v+="Mobile",w=w.replace(RegExp(" *"+q+"$"),"")):"Safari"==v&&/\bChrome\b/.exec(C&&C[1])&&(p.unshift("desktop mode"),v="Chrome Mobile",u=null,/\bOS X\b/.test(w)?(K=
"Apple",w="iOS 4.3+"):w=null);u&&0==u.indexOf(q=/[\d.]+$/.exec(w))&&-1<a.indexOf("/"+q+"-")&&(w=String(w.replace(q,"")).replace(/^ +| +$/g,""));C&&!/\b(?:Avant|Nook)\b/.test(v)&&(/Browser|Lunascape|Maxthon/.test(v)||"Safari"!=v&&/^iOS/.test(w)&&/\bSafari\b/.test(C[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(v)&&C[1])&&(q=C[C.length-1])&&p.push(q);p.length&&(p=["("+p.join("; ")+")"]);K&&z&&0>z.indexOf(K)&&p.push("on "+K);z&&p.push((/^on /.test(p[p.length-
1])?"":"on ")+z);if(w){var W=(q=/ ([\d.+]+)$/.exec(w))&&"/"==w.charAt(w.length-q[0].length-1);w={architecture:32,family:q&&!W?w.replace(q[0],""):w,version:q?q[1]:null,toString:function(){var a=this.version;return this.family+(a&&!W?" "+a:"")+(64==this.architecture?" 64-bit":"")}}}(q=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(w&&(w.architecture=64,w.family=w.family.replace(RegExp(" *"+q),"")),v&&(/\bWOW64\b/i.test(a)||P&&/\w(?:86|32)$/.test(r.cpuClass||r.platform)&&!/\bWin64; x64\b/i.test(a))&&
p.unshift("32-bit")):w&&/^OS X/.test(w.family)&&"Chrome"==v&&39<=parseFloat(u)&&(w.architecture=64);a||(a=null);l={};l.description=a;l.layout=C&&C[0];l.manufacturer=K;l.name=v;l.prerelease=H;l.product=z;l.ua=a;l.version=v&&u;l.os=w||{architecture:null,family:null,version:null,toString:function(){return"null"}};l.parse=m;l.toString=function(){return this.description||""};l.version&&p.unshift(u);l.name&&p.unshift(v);w&&v&&(w!=String(w).split(" ")[0]||w!=v.split(" ")[0]&&!z)&&p.push(z?"("+w+")":"on "+
w);p.length&&(l.description=p.join(" "));return l}var k={"function":!0,object:!0},n=k[typeof window]&&window||this,l=k[typeof exports]&&exports;k=k[typeof module]&&module&&!module.nodeType&&module;var r=l&&k&&"object"==typeof global&&global;!r||r.global!==r&&r.window!==r&&r.self!==r||(n=r);var p=Math.pow(2,53)-1,t=/\bOpera/;r=Object.prototype;var u=r.hasOwnProperty,x=r.toString,B=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(n.platform=B,define(function(){return B})):l&&
k?d(B,function(a,b){l[b]=a}):n.platform=B}).call(this);
function buildIOSMeta(){for(var a=[{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black"}],c=0;c<a.length;c++){var b=document.createElement("meta");b.name=a[c].name;b.content=a[c].content;var d=window.document.head.querySelector('meta[name="'+b.name+'"]');d&&d.parentNode.removeChild(d);window.document.head.appendChild(b)}}
function hideIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","none");jQuery(".xxx-ios-fullscreen-scroll").css("display","none");jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se")}function buildIOSFullscreenPanel(){jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>')}
function showIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","block");jQuery(".xxx-ios-fullscreen-scroll").css("display","block")}
function __iosResize(){window.scrollTo(0,0);if("iPhone"===platform.product)switch(window.devicePixelRatio){case 2:switch(window.innerWidth){case 568:320!==window.innerHeight&&jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se");break;case 667:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;case 3:switch(window.innerWidth){case 736:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;
case 724:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;default:hideIOSFullscreenPanel()}}function iosResize(){__iosResize();setTimeout(function(){__iosResize()},500)}function iosInIframe(){try{return window.self!==window.top}catch(a){return!0}}$(document).ready(function(){platform&&"iPhone"===platform.product&&!iosInIframe()&&(buildIOSFullscreenPanel(),buildIOSMeta())});
jQuery(window).resize(function(){platform&&"iPhone"===platform.product&&!iosInIframe()&&iosResize()});var s_bLandscape=!0,s_iScaleFactor=1,s_bIsIphone=!1,s_iOffsetX,s_iOffsetY;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");for(-1!==navigator.userAgent.toLowerCase().indexOf("iphone")&&(s_bIsIphone=!0);a.length;)if(navigator.platform===a.pop())return!0;return s_bIsIphone=!1}
function getSize(a){var c=a.toLowerCase(),b=window.document,d=b.documentElement;if(void 0===window["inner"+a])a=d["client"+a];else if(window["inner"+a]!=d["client"+a]){var e=b.createElement("body");e.id="vpw-test-b";e.style.cssText="overflow:scroll";var f=b.createElement("div");f.id="vpw-test-d";f.style.cssText="position:absolute;top:-1000px";f.innerHTML="<style>@media("+c+":"+d["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+c+":7px!important}}</style>";e.appendChild(f);d.insertBefore(e,b.head);
a=7==f["offset"+a]?d["client"+a]:window["inner"+a];d.removeChild(e)}else a=window["inner"+a];return a}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}
function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?getIOSWindowHeight():getSize("Height");var c=getSize("Width"),b=Math.min(a/CANVAS_HEIGHT,c/CANVAS_WIDTH);c>a?(EDGEBOARD_X=0,EDGEBOARD_Y=570,s_bLandscape=!0):(EDGEBOARD_X=470,EDGEBOARD_Y=0,s_bLandscape=!1);var d=Math.round(CANVAS_WIDTH*b);b=Math.round(CANVAS_HEIGHT*b);if(b<a){var e=a-b;b+=e;d+=CANVAS_WIDTH/CANVAS_HEIGHT*e}else d<c&&(e=c-d,d+=e,b+=CANVAS_HEIGHT/CANVAS_WIDTH*e);e=a/2-b/
2;var f=c/2-d/2,g=CANVAS_WIDTH/d;if(f*g<-EDGEBOARD_X||e*g<-EDGEBOARD_Y)b=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),c/(CANVAS_WIDTH-2*EDGEBOARD_X)),d=CANVAS_WIDTH*b,b*=CANVAS_HEIGHT,e=(a-b)/2,f=(c-d)/2,g=CANVAS_WIDTH/d;s_iOffsetX=-1*f*g;s_iOffsetY=-1*e*g;0<=e&&(s_iOffsetY=0);0<=f&&(s_iOffsetX=0);null!==s_oGame&&s_oGame.refreshButtonPos();null!==s_oMenu&&s_oMenu.refreshButtonPos();null!==s_oModeMenu&&s_oModeMenu.refreshButtonPos();s_iScaleFactor=Math.min(d/CANVAS_WIDTH,b/CANVAS_HEIGHT);s_bIsIphone?(canvas=
document.getElementById("canvas"),s_oStage.canvas.width=2*d,s_oStage.canvas.height=2*b,canvas.style.width=d+"px",canvas.style.height=b+"px",s_iScaleFactor=2*Math.min(d/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile||isChrome()?($("#canvas").css("width",d+"px"),$("#canvas").css("height",b+"px")):(s_oStage.canvas.width=d,s_oStage.canvas.height=b,s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);0>e||(e=(a-b)/2);$("#canvas").css("top",e+"px");$("#canvas").css("left",
f+"px");fullscreenHandler()}}function createBitmap(a,c,b){var d=new createjs.Bitmap(a),e=new createjs.Shape;c&&b?e.graphics.beginFill("#fff").drawRect(0,0,c,b):e.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);d.hitArea=e;return d}function createSprite(a,c,b,d,e,f){a=null!==c?new createjs.Sprite(a,c):new createjs.Sprite(a);c=new createjs.Shape;c.graphics.beginFill("#000000").drawRect(-b,-d,e,f);a.hitArea=c;return a}
function randomFloatBetween(a,c,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(c-a),c).toFixed(b))}function rotateVector2D(a,c){var b=c.getX()*Math.cos(a)+c.getY()*Math.sin(a),d=c.getX()*-Math.sin(a)+c.getY()*Math.cos(a);c.set(b,d)}function tweenVectorsOnX(a,c,b){return a+b*(c-a)}this.tweenVectors=function(a,c,b){var d=new CVector2;d.set(a.getX()+b*(c.getX()-a.getX()),a.getY()+b*(c.getY()-a.getY()));return d};
function distanceV2(a,c){var b=a.x-c.x,d=a.y-c.y;return Math.sqrt(b*b+d*d)}function shuffle(a){for(var c=a.length,b,d;0!==c;)d=Math.floor(Math.random()*c),--c,b=a[c],a[c]=a[d],a[d]=b;return a}function bubbleSort(a){do{var c=!1;for(var b=0;b<a.length-1;b++)a[b]>a[b+1]&&(c=a[b],a[b]=a[b+1],a[b+1]=c,c=!0)}while(c)}function compare(a,c){return a.index>c.index?-1:a.index<c.index?1:0}function easeLinear(a,c,b,d){return b*a/d+c}function easeInQuad(a,c,b,d){return b*(a/=d)*a+c}
function easeInSine(a,c,b,d){return-b*Math.cos(a/d*(Math.PI/2))+b+c}function easeInCubic(a,c,b,d){return b*(a/=d)*a*a+c}function getTrajectoryPoint(a,c){var b=new createjs.Point,d=(1-a)*(1-a),e=a*a;b.x=d*c.start.x+2*(1-a)*a*c.traj.x+e*c.end.x;b.y=d*c.start.y+2*(1-a)*a*c.traj.y+e*c.end.y;return b}function formatTime(a){a/=1E3;var c=Math.floor(a/60);a=Math.floor(a-60*c);var b="";b=10>c?b+("0"+c+":"):b+(c+":");return 10>a?b+("0"+a):b+a}function degreesToRadians(a){return a*Math.PI/180}
function checkRectCollision(a,c){var b=getBounds(a,.9);var d=getBounds(c,.98);return calculateIntersection(b,d)}function collisionWithCircle(a,c,b){var d=a.getX()-c.getX();a=a.getY()-c.getY();return Math.sqrt(d*d+a*a)<PLAYER_RADIUS*b+CELL_SIZE*b?!0:!1}
function calculateIntersection(a,c){var b,d,e,f;var g=a.x+(b=a.width/2);var h=a.y+(d=a.height/2);var m=c.x+(e=c.width/2);var k=c.y+(f=c.height/2);g=Math.abs(g-m)-(b+e);h=Math.abs(h-k)-(d+f);return 0>g&&0>h?(g=Math.min(Math.min(a.width,c.width),-g),h=Math.min(Math.min(a.height,c.height),-h),{x:Math.max(a.x,c.x),y:Math.max(a.y,c.y),width:g,height:h,rect1:a,rect2:c}):null}
function getBounds(a,c){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var d=a.children,e=d.length,f;for(f=0;f<e;f++){var g=getBounds(d[f],1);g.x<b.x&&(b.x=g.x);g.y<b.y&&(b.y=g.y);g.x+g.width>b.x2&&(b.x2=g.x+g.width);g.y+g.height>b.y2&&(b.y2=g.y+g.height)}Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{if(a instanceof createjs.Bitmap){e=
a.sourceRect||a.image;f=e.width*c;var h=e.height*c}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){e=a.spriteSheet.getFrame(a.currentFrame);f=e.rect.width;h=e.rect.height;d=e.regX;var m=e.regY}else b.x=a.x||0,b.y=a.y||0;else b.x=a.x||0,b.y=a.y||0;d=d||0;f=f||0;m=m||0;h=h||0;b.regX=d;b.regY=m;e=a.localToGlobal(0-d,0-m);g=a.localToGlobal(f-d,h-m);f=a.localToGlobal(f-d,0-m);d=a.localToGlobal(0-d,h-m);b.x=
Math.min(Math.min(Math.min(e.x,g.x),f.x),d.x);b.y=Math.min(Math.min(Math.min(e.y,g.y),f.y),d.y);b.width=Math.max(Math.max(Math.max(e.x,g.x),f.x),d.x)-b.x;b.height=Math.max(Math.max(Math.max(e.y,g.y),f.y),d.y)-b.y}return b}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(a){for(var c=a.length,b,d;0<c;)d=Math.floor(Math.random()*c),c--,b=a[c],a[c]=a[d],a[d]=b;return a}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0);a.dispatchEvent(c)}}};
(function(){function a(a){var b={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};a=a||window.event;a.type in b?document.body.className=b[a.type]:(document.body.className=this[c]?"hidden":"visible","hidden"===document.body.className?s_oMain.stopUpdate():s_oMain.startUpdate())}var c="hidden";c in document?document.addEventListener("visibilitychange",a):(c="mozHidden")in document?document.addEventListener("mozvisibilitychange",a):(c="webkitHidden")in
document?document.addEventListener("webkitvisibilitychange",a):(c="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var c=window.location.search.substring(1).split("&"),b=0;b<c.length;b++){var d=c[b].split("=");if(d[0]==a)return d[1]}}function playSound(a,c,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(c),s_aSounds[a].loop(b),s_aSounds[a]):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,c){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(c)}
function setMute(a,c){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(c)}function saveItem(a,c){s_bStorageAvailable&&localStorage.setItem(a,c)}function getItem(a){return s_bStorageAvailable?localStorage.getItem(a):null}function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.enabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut(),null!==s_oModeMenu&&s_oModeMenu.resetFullscreenBut())}
if(screenfull.enabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut();null!==s_oModeMenu&&s_oModeMenu.resetFullscreenBut()});
function CSpriteLibrary(){var a={},c,b,d,e,f,g;this.init=function(a,m,k){c={};d=b=0;e=a;f=m;g=k};this.addSprite=function(d,e){if(!a.hasOwnProperty(d)){var f=new Image;a[d]=c[d]={szPath:e,oSprite:f,bLoaded:!1};b++}};this.getSprite=function(b){return a.hasOwnProperty(b)?a[b].oSprite:null};this._onSpritesLoaded=function(){b=0;f.call(g)};this._onSpriteLoaded=function(){e.call(g);++d===b&&this._onSpritesLoaded()};this.loadSprites=function(){for(var a in c)c[a].oSprite.oSpriteLibrary=this,c[a].oSprite.szKey=
a,c[a].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey);this.oSpriteLibrary._onSpriteLoaded(this.szKey)},c[a].oSprite.onerror=function(a){var b=a.currentTarget;setTimeout(function(){c[b.szKey].oSprite.src=c[b.szKey].szPath},500)},c[a].oSprite.src=c[a].szPath};this.setLoaded=function(b){a[b].bLoaded=!0};this.isLoaded=function(b){return a[b].bLoaded};this.getNumSprites=function(){return b}}
var CANVAS_WIDTH=1920,CANVAS_HEIGHT=1920,EDGEBOARD_X=0,EDGEBOARD_Y=0,FONT="impact",ENABLE_FULLSCREEN,FPS=30,DISABLE_SOUND_MOBILE=!1,STATE_LOADING=0,STATE_MENU=1,STATE_MODE=2,STATE_LEVEL=3,STATE_GAME=4,MODE_SINGLE=0,MODE_VS_CPU=1,MODE_VS_HUMAN=2,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_BUT_YES_DOWN=4,ON_BACK_MENU=5,ON_RESTART=6,ON_NEXT=7,ON_DART_GUI_END_MOVE_DOWN=8,ON_DART_GUI_END_MOVE_UP=9,CUR_GRID_SCALE=1,NUM_SPRITE_DART=26,DART_WIDTH=332,DART_HEIGHT=1320,MAX_SWIPE_TIME=250,
MIN_DIST_SWIPE=100,FORCE_MULTIPLIER=7.2,MAX_FORCE=258*FORCE_MULTIPLIER,MAX_DART_ANGLE_ROT=45,RADIUS_SPHERE_BOARD=160,SLICE_ANGLE=18,SLICE_VALUES_RIGHT=[20,1,18,4,13,6,10,15,2,17,3],SLICE_VALUES_LEFT=[20,5,12,9,14,11,8,16,7,19,3],TIME_DART_MOVE_X=2E3,STARTING_SCORE=501,MAX_NUM_THROW=99,NUM_THROW_PER_TURN=3,POINTS_DARTBOARD_CENTER=[50,25],DIST_SLICES=[17,44,241,265,402,430],STROKE_COLORS=["#0187b0","#089e01","#c16400","#cd0224"],NUM_COLS_PAGE_LEVEL=4,NUM_ROWS_PAGE_LEVEL=2,NUM_LEVELS=8,AI_ACCURACY=[1,
.9,.8,.7,.6,.5,.4,.3,.2];
function CMain(a){var c,b=0,d=0,e=STATE_LOADING,f,g;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);createjs.Touch.enable(s_oStage);s_oStage.preventSelection=!1;s_bMobile=jQuery.browser.mobile;!1===s_bMobile&&s_oStage.enableMouseOver(20);s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=FPS;navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=
new CSpriteLibrary;f=new CPreloader};this.preloaderReady=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();this._loadImages();c=!0};this.soundLoaded=function(){b++;f.refreshLoader(Math.floor(b/d*100))};this._initSounds=function(){s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"win",loop:!1,volume:1,ingamename:"win"});s_aSoundsInfo.push({path:"./sounds/",filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});s_aSoundsInfo.push({path:"./sounds/",filename:"click",
loop:!1,volume:1,ingamename:"click"});s_aSoundsInfo.push({path:"./sounds/",filename:"hit",loop:!1,volume:1,ingamename:"hit"});s_aSoundsInfo.push({path:"./sounds/",filename:"launch",loop:!1,volume:1,ingamename:"launch"});s_aSoundsInfo.push({path:"./sounds/",filename:"miss",loop:!1,volume:1,ingamename:"miss"});s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});d+=s_aSoundsInfo.length;s_aSounds=[];for(var a=0;a<s_aSoundsInfo.length;a++)this.tryToLoadSound(s_aSoundsInfo[a],
!1)};this.tryToLoadSound=function(a,b){setTimeout(function(){s_aSounds[a.ingamename]=new Howl({src:[a.path+a.filename+".mp3"],autoplay:!1,preload:!0,loop:a.loop,volume:a.volume,onload:s_oMain.soundLoaded,onloaderror:function(a,b){for(var c=0;c<s_aSoundsInfo.length;c++)if(a===s_aSounds[s_aSoundsInfo[c].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[c],!0);break}}})},b?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("but_play",
"./sprites/but_play.png");s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("but_start","./sprites/but_start.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("bg_level_selection","./sprites/bg_level_selection.png");s_oSpriteLibrary.addSprite("but_exit",
"./sprites/but_exit.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("ctl_logo","./sprites/ctl_logo.png");s_oSpriteLibrary.addSprite("dartboard","./sprites/dartboard.png");s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png");s_oSpriteLibrary.addSprite("but_next","./sprites/but_next.png");s_oSpriteLibrary.addSprite("dart_icon",
"./sprites/dart_icon.png");s_oSpriteLibrary.addSprite("hand_swipe","./sprites/hand_swipe.png");s_oSpriteLibrary.addSprite("contact_effect","./sprites/contact_effect.png");s_oSpriteLibrary.addSprite("dart_shadow","./sprites/dart_shadow.png");s_oSpriteLibrary.addSprite("arrow","./sprites/arrow.png");s_oSpriteLibrary.addSprite("arrow_fill","./sprites/arrow_fill.png");s_oSpriteLibrary.addSprite("bg_score","./sprites/bg_score.png");s_oSpriteLibrary.addSprite("bg_dart_score","./sprites/bg_dart_score.png");
s_oSpriteLibrary.addSprite("but_single","./sprites/but_single.png");s_oSpriteLibrary.addSprite("but_vs_cpu","./sprites/but_vs_cpu.png");s_oSpriteLibrary.addSprite("but_vs_human","./sprites/but_vs_human.png");s_oSpriteLibrary.addSprite("but_level","./sprites/but_level.png");s_oSpriteLibrary.addSprite("bg_select_mode","./sprites/bg_select_mode.jpg");s_oSpriteLibrary.addSprite("but_help","./sprites/but_help.png");s_oSpriteLibrary.addSprite("dartboard_help","./sprites/dartboard_help.png");s_oSpriteLibrary.addSprite("but_settings",
"./sprites/but_settings.png");s_oSpriteLibrary.addSprite("help_box","./sprites/help_box.png");s_oSpriteLibrary.addSprite("bg_score_info","./sprites/bg_score_info.png");for(var a=0;2>a;a++)for(var b=0;b<NUM_SPRITE_DART;b++)s_oSpriteLibrary.addSprite("dart_"+a+"_"+b,"./sprites/dart/dart_"+a+"_"+b+".png");d+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;f.refreshLoader(Math.floor(b/d*100))};this._onRemovePreloader=function(){try{saveItem("ls_available",
"ok")}catch(h){s_bStorageAvailable=!1}f.unload();s_oSoundTrack=playSound("soundtrack",1,!0);this.gotoMenu()};this._onAllImagesLoaded=function(){};this.onAllPreloaderImagesLoaded=function(){this._loadImages()};this.modeSelected=function(a){s_iCurMode=a;s_iCurMode===MODE_VS_CPU?this.gotoLevelMenu():this.gotoGame()};this.levelSelected=function(a){s_iCurLevel=a;this.gotoGame()};this.gotoMenu=function(){new CMenu;e=STATE_MENU};this.gotoModePanel=function(){new CMenuMode;e=STATE_MODE};this.gotoLevelMenu=
function(){new CLevelMenu;e=STATE_LEVEL};this.gotoGame=function(){g=new CGame;e=STATE_GAME};this.stopUpdateNoBlock=function(){c=!1;createjs.Ticker.paused=!0};this.startUpdateNoBlock=function(){s_iPrevTime=(new Date).getTime();c=!0;createjs.Ticker.paused=!1};this.stopUpdate=function(){c=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();c=!0;createjs.Ticker.paused=
!1;$("#block_game").css("display","none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};this._update=function(a){if(!1!==c){var b=(new Date).getTime();s_iTimeElaps=b-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=b;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);e===STATE_GAME&&g.update();s_oStage.update(a)}};s_oMain=this;ENABLE_FULLSCREEN=a.fullscreen;this.initContainer()}
var s_bMobile,s_bAudioActive=!0,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oSoundTrack=null,s_oCanvas,s_bFullscreen=!1,s_aSounds,s_bStorageAvailable=!0,s_bFirstPlay=!0,s_iCurMode=0,s_iLastLevel=1,s_iCurLevel=1;s_bFirstPlay=!0;
var TEXT_PRELOADER_CONTINUE="START",TEXT_ARE_YOU_SURE="ARE YOU SURE?",TEXT_DEVELOPED="DEVELOPED BY",TEXT_SCORE="SCORE",TEXT_BEST="BEST",TEXT_DART="DART",TEXT_THROWS="THROWS",TEXT_TOTAL="TOTAL",TEXT_BEST_SCORE="BEST SCORE",TEXT_LEVEL_SCORE="LEVEL SCORE",TEXT_TOT_SCORE="TOTAL SCORE",TEXT_GAME_OVER="GAME OVER",TEXT_TOO_SLOW="TOO SLOOOOW!",TEXT_SELECT_MODE="SELECT MODE",TEXT_PLAYER_NAME=["PLAYER 1","PLAYER 2"],TEXT_CPU="CPU",TEXT_YOU_WIN="YOU WIN",TEXT_YOU_LOSE="YOU LOSE",TEXT_CONGRATS="CONGRATS!!",TEXT_WINS=
"WINS!!",TEXT_SELECT_LEVEL="SELECT A LEVEL",TEXT_PT="PT",TEXT_DOUBLE="DOUBLE RING",TEXT_TRIPLE="TRIPLE RING",TEXT_CENTER="CENTER",TEXT_BULLSEYE="BULL'S EYE",TEXT_HINT1="YOU MUST HIT DOUBLE",TEXT_HINT2="TO WIN THE MATCH!",TEXT_HELP_CONTROLS_1="TAP THE SCREEN TO STOP THE DART WHERE YOU WANT",TEXT_HELP_CONTROLS_2="PRESS AND HOLD TO SET THE POWER AND DIRECTION. RELEASE TO THROW THE DART.",TEXT_HELP="YOUR GOAL IS TO DECREASE YOUR STARTING SCORE 501. THE FINAL DART MUST LAND IN EITHER THE BULLSEYE OR A DOUBLE SEGMENT IN ORDER TO WIN",
TEXT_ERR_LS="YOUR WEB BROWSER DOES NOT SUPPORT LOCAL STORAGE. IF YOU'RE USING SAFARI, IT MAY BE RELATED TO PRIVATE BROWSING. AS A RESULT, SOME INFO MAY NOT BE SAVED OR SOME FEATURES MAY NOT BE AVAILABLE.",TEXT_SHARE_IMAGE="200x200.jpg",TEXT_SHARE_TITLE="Congratulations!",TEXT_SHARE_MSG1="You collected <strong>",TEXT_SHARE_MSG2=" points</strong>!<br><br>Share your score with your friends!",TEXT_SHARE_SHARE1="My score is ",TEXT_SHARE_SHARE2="points! Can you do better",PREFIX_STORAGE="darts_pro_";
function setLocalStorageLevel(a){s_iLastLevel<a&&(s_iLastLevel=a,saveItem(PREFIX_STORAGE+"level",s_iLastLevel))}function setLocalStorageScore(a,c){saveItem(PREFIX_STORAGE+"score_level_"+c,a)}function setScoreSingleMode(a){saveItem(PREFIX_STORAGE+"score",a)}function setBestScoreSingleMode(a){saveItem(PREFIX_STORAGE+"best_score",a)}function clearLocalStorage(){s_iLastLevel=1;s_bStorageAvailable&&localStorage.clear()}
function getBestScoreSingleMode(){if(!s_bStorageAvailable)return 0;var a=getItem(PREFIX_STORAGE+"best_score");return null===a?0:a}function getLastLevel(){if(!s_bStorageAvailable)return 1;var a=getItem(PREFIX_STORAGE+"level");return null===a?1:a}function getScoreTillLevel(a){if(!s_bStorageAvailable)return 0;for(var c=0,b=0;b<a-1;b++)c+=parseInt(getItem(PREFIX_STORAGE+"score_level_"+(b+1)));return c}
function CPreloader(){var a,c,b,d,e,f,g,h,m,k;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.addSprite("but_start","./sprites/but_start.png");s_oSpriteLibrary.loadSprites();k=new createjs.Container;s_oStage.addChild(k)};this.unload=function(){k.removeAllChildren();m.unload()};this._onImagesLoaded=function(){};
this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var n=new createjs.Shape;n.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);k.addChild(n);n=s_oSpriteLibrary.getSprite("200x200");g=createBitmap(n);g.regX=.5*n.width;g.regY=.5*n.height;g.x=CANVAS_WIDTH/2;g.y=CANVAS_HEIGHT/2-180;k.addChild(g);h=new createjs.Shape;h.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(g.x-100,g.y-100,200,200,10);k.addChild(h);g.mask=h;
n=s_oSpriteLibrary.getSprite("progress_bar");d=createBitmap(n);d.x=CANVAS_WIDTH/2-n.width/2;d.y=CANVAS_HEIGHT/2+50;k.addChild(d);a=n.width;c=n.height;e=new createjs.Shape;e.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x,d.y,1,c);k.addChild(e);d.mask=e;b=new createjs.Text("","30px "+FONT,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2+100;b.textBaseline="alphabetic";b.textAlign="center";k.addChild(b);n=s_oSpriteLibrary.getSprite("but_start");m=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/2,n,TEXT_PRELOADER_CONTINUE,
"Arial","#000","bold 50",k);m.addEventListener(ON_MOUSE_UP,this._onButStartRelease,this);m.setVisible(!1);f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);k.addChild(f);createjs.Tween.get(f).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(f);k.removeChild(f)})};this._onButStartRelease=function(){s_oMain._onRemovePreloader()};this.refreshLoader=function(f){b.text=f+"%";100===f&&(m.setVisible(!0),b.visible=!1,d.visible=!1);e.graphics.clear();
f=Math.floor(f*a/100);e.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x,d.y,f,c)};this._init()}
function CTextButton(a,c,b,d,e,f,g,h){var m,k,n,l,r,p,t,u,x,B;this._init=function(a,b,c,d,e,f,g,h){m=!1;l=[];r=[];B=createBitmap(c);k=c.width;n=c.height;var p=Math.ceil(g/20);u=new createjs.Text(d,g+"px "+e,"#000000");var y=u.getBounds();u.textAlign="center";u.lineWidth=.9*k;u.textBaseline="alphabetic";u.x=c.width/2+p;u.y=Math.floor(c.height/2)+y.height/3+p;x=new createjs.Text(d,g+"px "+e,f);x.textAlign="center";x.textBaseline="alphabetic";x.lineWidth=.9*k;x.x=c.width/2;x.y=Math.floor(c.height/2)+
y.height/3;t=new createjs.Container;t.x=a;t.y=b;t.regX=c.width/2;t.regY=c.height/2;s_bMobile||(t.cursor="pointer");t.addChild(B,u,x);!1!==h&&s_oStage.addChild(t);this._initListener()};this.unload=function(){t.off("mousedown");t.off("pressup");s_oStage.removeChild(t)};this.setVisible=function(a){t.visible=a};this.setAlign=function(a){x.textAlign=a;u.textAlign=a};this.enable=function(){m=!1;B.filters=[];B.cache(0,0,k,n)};this.disable=function(){m=!0;var a=(new createjs.ColorMatrix).adjustSaturation(-100).adjustBrightness(40);
B.filters=[new createjs.ColorMatrixFilter(a)];B.cache(0,0,k,n)};this._initListener=function(){t.on("mousedown",this.buttonDown);t.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){l[a]=b;r[a]=c};this.addEventListenerWithParams=function(a,b,c,d){l[a]=b;r[a]=c;p=d};this.buttonRelease=function(){m||(playSound("click",1,!1),t.scaleX=1,t.scaleY=1,l[ON_MOUSE_UP]&&l[ON_MOUSE_UP].call(r[ON_MOUSE_UP],p))};this.buttonDown=function(){m||(t.scaleX=.9,t.scaleY=.9,l[ON_MOUSE_DOWN]&&l[ON_MOUSE_DOWN].call(r[ON_MOUSE_DOWN]))};
this.setPosition=function(a,b){t.x=a;t.y=b};this.changeText=function(a){x.text=a;u.text=a};this.setX=function(a){t.x=a};this.setY=function(a){t.y=a};this.getButtonImage=function(){return t};this.getX=function(){return t.x};this.getY=function(){return t.y};this.getSprite=function(){return t};this._init(a,c,b,d,e,f,g,h);return this}
function CToggle(a,c,b,d,e){var f,g,h,m=[],k;this._init=function(a,b,c,d){g=[];h=[];var l=new createjs.SpriteSheet({images:[c],frames:{width:c.width/2,height:c.height,regX:c.width/2/2,regY:c.height/2},animations:{state_true:[0],state_false:[1]}});f=d;k=createSprite(l,"state_"+f,c.width/2/2,c.height/2,c.width/2,c.height);k.mouseEnabled=!0;k.x=a;k.y=b;k.stop();k.cursor="pointer";e.addChild(k);this._initListener()};this.unload=function(){k.off("mousedown",this.buttonDown);k.off("pressup",this.buttonRelease);
k.mouseEnabled=!1;e.removeChild(k)};this._initListener=function(){k.on("mousedown",this.buttonDown);k.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){g[a]=b;h[a]=c};this.addEventListenerWithParams=function(a,b,c,d){g[a]=b;h[a]=c;m=d};this.setActive=function(a){f=a;k.gotoAndStop("state_"+f)};this.buttonRelease=function(){k.scaleX=1;k.scaleY=1;playSound("click",1,!1);f=!f;k.gotoAndStop("state_"+f);g[ON_MOUSE_UP]&&g[ON_MOUSE_UP].call(h[ON_MOUSE_UP],m)};this.buttonDown=function(){k.scaleX=
.9;k.scaleY=.9;g[ON_MOUSE_DOWN]&&g[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN],m)};this.setPosition=function(a,b){k.x=a;k.y=b};this.setVisible=function(a){k.visible=a};this.getButtonImage=function(){return k};this._init(a,c,b,d)}
function CGfxButton(a,c,b,d){var e,f,g,h,m,k=[],n,l=this;this._init=function(a,b,c){e=1;h=[];m=[];n=createBitmap(c);n.x=a;n.y=b;n.regX=c.width/2;n.regY=c.height/2;n.cursor="pointer";r.addChild(n);this._initListener()};this.unload=function(){n.off("mousedown",f);n.off("pressup",g);r.removeChild(n)};this.setVisible=function(a){n.visible=a};this.setScale=function(a){e=a;n.scaleX=n.scaleY=e};this._initListener=function(){f=n.on("mousedown",this.buttonDown);g=n.on("pressup",this.buttonRelease)};this.addEventListener=
function(a,b,c){h[a]=b;m[a]=c};this.addEventListenerWithParams=function(a,b,c,d){h[a]=b;m[a]=c;k=d};this.buttonRelease=function(){n.scaleX=e;n.scaleY=e;h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(m[ON_MOUSE_UP],k)};this.buttonDown=function(){n.scaleX=.9*e;n.scaleY=.9*e;playSound("click",1,!1);h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(m[ON_MOUSE_DOWN],k)};this.setScale=function(a){e=a;n.scaleX=a;n.scaleY=a};this.setPosition=function(a,b){n.x=a;n.y=b};this.pulseAnimation=function(){createjs.Tween.get(n).to({scaleX:1.1*
e,scaleY:1.1*e},850,createjs.Ease.quadOut).to({scaleX:e,scaleY:e},650,createjs.Ease.quadIn).call(function(){l.pulseAnimation()})};this.setX=function(a){n.x=a};this.setY=function(a){n.y=a};this.getButtonImage=function(){return n};this.getX=function(){return n.x};this.getY=function(){return n.y};var r=d;this._init(a,c,b);return this}
function CMenu(){var a,c,b,d,e,f,g,h,m=null,k=null,n,l,r;this._init=function(){n=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(n);g=new CGfxButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/2+300,s_oSpriteLibrary.getSprite("but_play"),s_oStage);g.addEventListener(ON_MOUSE_UP,this._onStart,this,0);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile){var p=s_oSpriteLibrary.getSprite("audio_icon");e=CANVAS_WIDTH-p.height/2-10;f=p.height/2+10;l=new CToggle(e,f,p,s_bAudioActive,s_oStage);l.addEventListener(ON_MOUSE_UP,
this._onAudioToggle,this)}p=s_oSpriteLibrary.getSprite("but_credits");b=p.width/2+10;d=p.height/2+10;h=new CGfxButton(b,d,p,s_oStage);h.addEventListener(ON_MOUSE_UP,this._onCreditsBut,this);p=window.document;var t=p.documentElement;m=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||t.msRequestFullscreen;k=p.exitFullscreen||p.mozCancelFullScreen||p.webkitExitFullscreen||p.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(m=!1);m&&screenfull.enabled&&(p=s_oSpriteLibrary.getSprite("but_fullscreen"),
a=b+p.width/2+10,c=p.height/2+10,r=new CToggle(a,c,p,s_bFullscreen,s_oStage),r.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));s_bStorageAvailable?s_iLastLevel=getLastLevel():new CMsgBox;var u=new createjs.Shape;u.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(u);createjs.Tween.get(u).to({alpha:0},1E3).call(function(){u.visible=!1});setVolume("soundtrack",1);this.refreshButtonPos()};this.unload=function(){g.unload();h.unload();if(!1===DISABLE_SOUND_MOBILE||
!1===s_bMobile)l.unload(),l=null;m&&screenfull.enabled&&r.unload();s_oMenu=null;s_oStage.removeAllChildren()};this.refreshButtonPos=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||l.setPosition(e-s_iOffsetX,s_iOffsetY+f);m&&screenfull.enabled&&r.setPosition(a+s_iOffsetX,c+s_iOffsetY);h.setPosition(b+s_iOffsetX,s_iOffsetY+d)};this._onStart=function(){$(s_oMain).trigger("start_session");s_oMenu.unload();s_oMain.gotoModePanel()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=
!s_bAudioActive};this._onCreditsBut=function(){new CCreditsPanel};this.resetFullscreenBut=function(){m&&screenfull.enabled&&r.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?k.call(window.document):m.call(window.document.documentElement);sizeHandler()};s_oMenu=this;this._init()}var s_oMenu=null;
function CGame(){var a,c,b,d,e,f,g,h,m,k,n,l,r,p,t,u,x,B,I,y,L,O,F,J,U=[],M,S,Q,T,E,D,A,V,G,N,q,R,H,P,C,v,z,K=null;this._init=function(){setVolume("soundtrack",.1);s_iCurMode!==MODE_VS_HUMAN&&(k=getScoreTillLevel(s_iCurLevel),r=0);this.reset();s_iCurMode===MODE_VS_CPU&&(L=AI_ACCURACY[s_iCurLevel-1]);C=new createjs.Container;C.x=CANVAS_WIDTH/2;C.regX=CANVAS_WIDTH/2;s_oStage.addChild(C);this._initMode();this._initDartBoard();var a=D.getDartTip();N=new CArrowThrow(a.x,a.y,H);A=new createjs.Shape;A.graphics.beginFill("rgba(255,0,0,0.01)").drawRect(0,
0,CANVAS_WIDTH,CANVAS_HEIGHT);C.addChild(A);s_bFirstPlay&&(K=new CHelpControls);G=new CInterface(I,J);q=new CAreYouSurePanel(s_oStage);q.addEventListener(ON_BUT_YES_DOWN,this.onConfirmExit,this);this._initGameOverPanel();V=new CAlertText;this.refreshButtonPos();this._resetHitArea()};this.unload=function(){G.unload();z.unload();A.off("mousedown",S);A.off("click",Q);s_oGame=null;createjs.Tween.removeAllTweens();s_oStage.removeAllChildren()};this.refreshButtonPos=function(){H.y=s_iOffsetY+20;this.refreshGridScale();
G.refreshButtonPos();null!==K&&K.refreshButtonPos()};this.refreshGridScale=function(){CUR_GRID_SCALE=(CANVAS_HEIGHT-2*s_iOffsetY-100)/u;CUR_GRID_SCALE=parseFloat(CUR_GRID_SCALE.toFixed(2));H.scaleX=H.scaleY=CUR_GRID_SCALE;v.regX=CANVAS_WIDTH/2;v.x=CANVAS_WIDTH/2;v.regY=CANVAS_HEIGHT/2;v.y=CANVAS_HEIGHT/2;v.scaleY=1/CUR_GRID_SCALE;v.scaleX=v.scaleY*=1.5};this.reset=function(){h=g=!1;B=l=0;t=NUM_THROW_PER_TURN;for(var a=0;a<U.length;a++)U[a].unload();U=[]};this._initMode=function(){y=0;J=[];J.push(TEXT_PLAYER_NAME[0]);
s_iCurMode===MODE_SINGLE?I=1:(I=2,s_iCurMode===MODE_VS_CPU?J.push(TEXT_CPU):J.push(TEXT_PLAYER_NAME[1]));F=[];for(var a=0;a<I;a++)F[a]=STARTING_SCORE};this._initBg=function(){v=new createjs.Container;H.addChild(v);var a=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));v.addChild(a)};this._initDartBoard=function(){H=new createjs.Container;C.addChild(H);this._initBg();var a=s_oSpriteLibrary.getSprite("dartboard");R=new CDartBoard(v.getBounds().width/2,a.height/2,a,H);P=new createjs.Container;H.addChild(P);
e=v.getBounds().width/2-700;f=a.height-200+DART_HEIGHT;M={x:v.getBounds().width/2+700,y:a.height-200+DART_HEIGHT};this._createDart();u=f;H.regX=H.getBounds().width/2;H.x=p=CANVAS_WIDTH/2};this._initGameOverPanel=function(){switch(s_iCurMode){case MODE_SINGLE:z=new CEndPanelSingleMode;z.addEventListener(ON_BACK_MENU,this.onConfirmExit,this);z.addEventListener(ON_RESTART,this._restartGame,this);break;case MODE_VS_CPU:z=new CEndPanelVsCpu;z.addEventListener(ON_BACK_MENU,this.onConfirmExit,this);z.addEventListener(ON_RESTART,
this._restartGame,this);z.addEventListener(ON_NEXT,this._nextLevel,this);break;case MODE_VS_HUMAN:z=new CEndPanelVsHuman,z.addEventListener(ON_BACK_MENU,this.onConfirmExit,this),z.addEventListener(ON_RESTART,this._restartGame,this)}};this._restartGame=function(){this.reset();P.removeAllChildren();F=[];for(var a=0;a<I;a++)F[a]=STARTING_SCORE,G.resetPlayerScore(a);y=0;this._createDart();G.reset();this._resetHitArea()};this._nextLevel=function(){s_iCurLevel++;L=AI_ACCURACY[s_iCurLevel-1];this._restartGame()};
this._createDart=function(){O=0;var a=new CDart(e,f,y,M,P);D=a;U.push(a);(s_iCurMode!==MODE_VS_CPU||s_iCurMode===MODE_VS_CPU&&0===y)&&41>F[y]&&0===F[y]%2&&V.show(TEXT_HINT1+" "+F[y]/2+" "+TEXT_HINT2)};this._resetHitArea=function(){S=A.on("mousedown",this.onMouseDown)};this.onMouseDown=function(e){g||A.off("mousedown",S);0===B?(D.stopTween(),g?h=!0:s_oGame._resetHitArea(),B++,s_bFirstPlay&&K.nextHelp()):(Q=A.on("click",s_oGame.onPressUp),T=A.on("pressmove",s_oGame.onPressMove),b=s_oStage.mouseX*s_iScaleFactor,
d=s_oStage.mouseY*s_iScaleFactor,a=s_oStage.mouseX*s_iScaleFactor,c=s_oStage.mouseY*s_iScaleFactor,e=D.getDartTip(),N.setPosition(e.x,e.y),N.setVisible(!0))};this.onPressUp=function(){if(!g&&(s_bFirstPlay&&(s_bFirstPlay=!1,K.hide(),K=null),A.off("click",Q),A.off("pressmove",T),c=a=0,N.setVisible(!1),0===O)){s_oGame._resetHitArea();return}var b=(x-360)/50;D.startAnim(CANVAS_WIDTH/2*b,O,b);s_oGame._prepareLaunchDart()};this._prepareLaunchDart=function(){V.hide();var a=CANVAS_WIDTH/2+(CANVAS_WIDTH/2-
D.getNewX()),b=-(D.getNewY()-H.y);b=s_bLandscape?b+CANVAS_HEIGHT/5:b+CANVAS_HEIGHT/3;createjs.Tween.get(H).to({y:b+200},500,createjs.Ease.cubicOut).to({y:b},500,createjs.Ease.sineIn);createjs.Tween.get(H).to({x:a},1500,createjs.Ease.cubicOut);createjs.Tween.get(H).to({scaleX:1.5,scaleY:1.5},1500,createjs.Ease.cubicOut);s_oGame.decreaseNumThrow();playSound("launch",1,!1)};this._aiShot=function(a){D.startAnim(a,O,a/700);this._prepareLaunchDart()};this.onPressMove=function(){a=s_oStage.mouseX*s_iScaleFactor;
c=s_oStage.mouseY*s_iScaleFactor;s_oGame.arrowUpdate()};this.arrowUpdate=function(){this.angleArrow();this.arrowMask()};this.angleArrow=function(){x=180/Math.PI*Math.atan2(d,{x:a-b,y:c-d}.x)+270;N.setAngle(x)};this.arrowMask=function(){var a=Math.abs(d-c);c<d||(a>N.getHeight()&&(a=N.getHeight()),O=a*FORCE_MULTIPLIER,N.mask(a))};var w=function(a,b,c){return a.y>b.y?-1:a.y<b.y?1:0};this._endThrow=function(){0===y&&s_iCurMode!==MODE_VS_HUMAN&&r++;P.sortChildren(w);this._checkThrowPoint();createjs.Tween.get(H).wait(1E3).to({scaleX:CUR_GRID_SCALE,
scaleY:CUR_GRID_SCALE,x:p,y:s_iOffsetY+20},1E3,createjs.Ease.cubicInOut).call(function(){s_oGame._resetShot()})};this._checkThrowPoint=function(){m=!1;var a=angleBetweenVectors(new CVector2(D.getX()-R.getX(),D.getY()-R.getY()),new CVector2(0,-1));a=toDegree(a);for(var b=distanceV2(D.getPos(),{x:R.getX(),y:R.getY()}),c=-1,d=0;d<DIST_SLICES.length;d++)if(b<DIST_SLICES[d]){c=d;break}n=0;1<c?(a=Math.floor(a/SLICE_ANGLE+.5),n=D.getX()>R.getX()?SLICE_VALUES_RIGHT[a]:SLICE_VALUES_LEFT[a],3===c?n*=3:5===
c&&(n*=2,m=!0)):-1!==c&&(n=POINTS_DARTBOARD_CENTER[c],0===c&&(m=!0));0<n?(playSound("hit",1,!1),new CScoreText(n,D.getPos().x,D.getPos().y,"#fff",H)):playSound("miss",1,!1);l+=n;G.showDartScore(y,NUM_THROW_PER_TURN-t-1,n,l)};this._resetShot=function(){F[y]-=n;var a=!1;if(0===F[y]){if(m){G.refreshPlayerScore(y,0);this.gameOver();return}a=!0}else 0>F[y]||1===F[y]?a=!0:G.refreshPlayerScore(y,F[y]);0===t||a?(t=0,1>=F[y]&&(F[y]+=l),G.refreshPlayerScore(y,F[y]),setTimeout(function(){s_oGame._changeTurn()},
2E3)):(B=0,this._createDart(),g?(this._calculateCPUGoal(),h=!0):this._resetHitArea())};this.decreaseNumThrow=function(){t--;G.refreshNumThrow(t)};this._manageAIThrow=function(){switch(B){case 0:D.getX()>E.x-300*L&&(h=!1,setTimeout(function(){s_oGame.onMouseDown()},Math.floor(400*Math.random()*L)));break;case 1:h=!1;var a=Math.floor(201*Math.random())-100;O=E.force+a*L;a=D.getDartTip();N.setPosition(a.x,a.y);var b=E.x-N.getX();a=Math.floor(101*Math.random())-50;b+=a*L;setTimeout(function(){s_oGame._aiShot(b)},
1E3)}};this._calculateAiGoal=function(){var a=F[1];switch(a){case 24:return"double_12";case 36:return"double_18";case 50:return"bulls_eye";case 81:return"triple_19";case 84:return"triple_16";default:return 61<a?"triple_20":40<a?(a-=40,0<a%2&&a++,""+a):0===a%2?"double_"+a/2:"1"}};this.onExit=function(){q.show(TEXT_ARE_YOU_SURE,90)};this.onConfirmExit=function(){this.unload();$(s_oMain).trigger("show_interlevel_ad");$(s_oMain).trigger("end_session");s_oMain.gotoMenu()};this._changeTurn=function(){if(s_iCurMode!==
MODE_SINGLE){var a=y;y++;y===F.length&&(y=0,G.resetScoreGUI());G.changeTurn(y,a)}else G.resetScoreGUI();this.reset();G.resetNumThrow();this._createDart();h=g=!1;1===y&&s_iCurMode===MODE_VS_CPU?(this._calculateCPUGoal(),h=g=!0):this._resetHitArea()};this._calculateCPUGoal=function(){var a=this._calculateAiGoal();E=AI_INFO_HIT[a]};this.gameOver=function(){if(s_iCurMode===MODE_SINGLE)this.refreshScore(!0),getBestScoreSingleMode()<k&&setBestScoreSingleMode(k),z.show(k,r);else if(s_iCurMode===MODE_VS_CPU){var a=
this.refreshScore(!1),b=!1;s_iCurLevel===NUM_LEVELS&&(b=!0);z.show(y,a,k,b)}else z.show(y,J[y],J,F)};this.refreshScore=function(a){var b=MAX_NUM_THROW-r;0>b&&(b=0);k+=b;a?setScoreSingleMode(k):setLocalStorageScore(b,s_iCurLevel);$(s_oMain).trigger("save_score",k);$(s_oMain).trigger("share_event",k);return b};this.update=function(){h&&this._manageAIThrow()};s_oGame=this;this._init()}var s_oGame=null;
function CInterface(a,c){var b,d,e,f,g,h,m,k,n,l,r,p,t=null,u=null,x,B,I,y,L,O,F,J,U,M,S;this._init=function(a,c){var E=s_oSpriteLibrary.getSprite("bg_score");n=CANVAS_WIDTH-E.width-10;l=CANVAS_HEIGHT-190;M=new createjs.Container;M.x=n;M.y=l;s_oStage.addChild(M);var D=s_oSpriteLibrary.getSprite("bg_score_info"),A=createBitmap(D);A.x=310;M.addChild(A);A=new createjs.Text("1","40px "+FONT,"#fff");A.x=340;A.y=44;A.textAlign="center";A.textBaseline="alphabetic";M.addChild(A);A=new createjs.Text("2","40px "+
FONT,"#fff");A.x=400;A.y=44;A.textAlign="center";A.textBaseline="alphabetic";M.addChild(A);A=new createjs.Text("3","40px "+FONT,"#fff");A.x=460;A.y=44;A.textAlign="center";A.textBaseline="alphabetic";M.addChild(A);A=new createjs.Text(TEXT_PT,"40px "+FONT,"#fff");A.x=540;A.y=44;A.textAlign="center";A.textBaseline="alphabetic";M.addChild(A);p=[];A=D.height;for(D=0;D<a;D++)p[D]=new CScoreGUI(0,A,E,c[D],M),A+=E.height/2;p[0].showTurn();E=s_oSpriteLibrary.getSprite("but_exit");m=CANVAS_WIDTH-E.width/2-
10;k=E.height/2+10;I=new CGfxButton(m,k,E,s_oStage);I.addEventListener(ON_MOUSE_UP,this._onExit,this);!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(g=m-E.width,h=k,E=s_oSpriteLibrary.getSprite("audio_icon"),x=new CToggle(g,h,E,s_bAudioActive,s_oStage),x.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),e=g-E.width/2,f=h):(e=m-E.width,f=k);E=window.document;D=E.documentElement;t=D.requestFullscreen||D.mozRequestFullScreen||D.webkitRequestFullScreen||D.msRequestFullscreen;u=E.exitFullscreen||E.mozCancelFullScreen||
E.webkitExitFullscreen||E.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(t=!1);t&&screenfull.enabled&&(E=s_oSpriteLibrary.getSprite("but_fullscreen"),B=new CToggle(e,f,E,s_bFullscreen,s_oStage),B.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));y=new CGfxButton(m,k,s_oSpriteLibrary.getSprite("but_help"),s_oStage);y.addEventListener(ON_MOUSE_UP,this._onHelp,this);E=s_oSpriteLibrary.getSprite("but_settings");L=new CGUIExpandible(m,k,E,s_oStage);L.addButton(I);!1!==DISABLE_SOUND_MOBILE&&!1!==
s_bMobile||L.addButton(x);t&&screenfull.enabled&&L.addButton(B);L.addButton(y);s_iCurMode===MODE_SINGLE&&(b=20,d=70,J=new createjs.Text(TEXT_BEST+" "+getBestScoreSingleMode(),"70px "+FONT,"#fff"),J.x=b,J.y=d,J.textAlign="left",J.textBaseline="alphabetic",s_oStage.addChild(J));E=s_oSpriteLibrary.getSprite("dart_icon");S={x:20,y:CANVAS_HEIGHT-E.height-20};O=new createjs.Container;O.x=S.x;O.y=S.Y;s_oStage.addChild(O);r=[];for(D=A=0;D<NUM_THROW_PER_TURN;D++){var Q=createBitmap(E);Q.x=A;O.addChild(Q);
A+=E.width+10;r.push(Q);D>=NUM_THROW_PER_TURN&&(Q.visible=!1)}F=new CRollingScore;U=new CHelpPanel};this.unload=function(){L.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)x.unload(),x=null;t&&screenfull.enabled&&B.unload();I.unload();y.unload();U.unload();s_oInterface=null};this.refreshButtonPos=function(){L.refreshPos();O.x=S.x+s_iOffsetX;O.y=S.y-s_iOffsetY;s_iCurMode===MODE_SINGLE&&(J.x=b+s_iOffsetX,J.y=d+s_iOffsetY);M.x=n-s_iOffsetX;M.y=l-s_iOffsetY};this.reset=function(){s_iCurMode===
MODE_SINGLE&&(J.text=TEXT_BEST+" "+getBestScoreSingleMode());this.resetNumThrow();this.resetScoreGUI()};this.changeTurn=function(a,b){p[a].showTurn();p[b].hideTurn()};this.resetPlayerScore=function(a){p[a].resetPlayerScore()};this.addThrows=function(a){for(var b=0;b<a;b++)r[b].visible=!0};this.resetScoreGUI=function(){for(var a=0;a<p.length;a++)p[a].reset()};this.resetNumThrow=function(){for(var a=0;a<r.length;a++)r[a].visible=!0};this.refreshNumThrow=function(a){r[a].visible=!1};this.refreshScore=
function(a){F.rolling(_oPointText,null,a)};this.showDartScore=function(a,b,c,d){p[a].showNextScore(b,c,d)};this.refreshPlayerScore=function(a,b){p[a].refreshPlayerScore(b)};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onExit=function(){s_oGame.onExit()};this.resetFullscreenBut=function(){t&&screenfull.enabled&&B.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?u.call(window.document):t.call(window.document.documentElement);
sizeHandler()};this._onHelp=function(){U.show()};s_oInterface=this;this._init(a,c);return this}var s_oInterface=null;
function CEndPanelSingleMode(){var a,c,b,d,e,f,g,h,m,k,n,l,r,p,t=this;this._init=function(){b=[];d=[];r=new createjs.Container;r.visible=!1;s_oStage.addChild(r);f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);f.alpha=0;e=f.on("click",function(){});r.addChild(f);p=new createjs.Container;p.x=CANVAS_WIDTH/2;r.addChild(p);var c=s_oSpriteLibrary.getSprite("msg_box"),t=createBitmap(c);p.addChild(t);g=new createjs.Text("","70px "+FONT,"#fff");g.x=c.width/2;g.y=
c.height/2-160;g.textAlign="center";g.textBaseline="alphabetic";g.lineWidth=c.width-40;p.addChild(g);k=new createjs.Text("","50px "+FONT,"#fff");k.x=c.width/2;k.y=c.height/2-50;k.textAlign="center";k.textBaseline="alphabetic";p.addChild(k);h=new createjs.Text("","50px "+FONT,"#fff");h.x=c.width/2;h.y=c.height/2+10;h.textAlign="center";h.textBaseline="alphabetic";p.addChild(h);m=new createjs.Text("","50px "+FONT,"#fff");m.x=c.width/2;m.y=c.height/2+70;m.textAlign="center";m.textBaseline="alphabetic";
p.addChild(m);n=new CGfxButton(c.width/2-190,c.height/2+180,s_oSpriteLibrary.getSprite("but_home"),p);n.addEventListener(ON_MOUSE_UP,this._onHome,this);l=new CGfxButton(c.width/2+190,c.height/2+180,s_oSpriteLibrary.getSprite("but_restart"),p);l.addEventListener(ON_MOUSE_UP,this._onRestart,this);a=-c.height/2;p.regX=c.width/2;p.regY=c.height/2};this.unload=function(){n.unload();l.unload();f.off("click",e)};this.addEventListener=function(a,c,e){b[a]=c;d[a]=e};this.show=function(b,c){playSound("win",
1,!1);g.text=TEXT_GAME_OVER;h.text=TEXT_SCORE+": "+b;m.text=TEXT_BEST_SCORE+": "+getBestScoreSingleMode();k.text=TEXT_THROWS+": "+c;f.alpha=0;p.y=a;r.visible=!0;createjs.Tween.get(f).to({alpha:.7},500);createjs.Tween.get(p).wait(400).to({y:CANVAS_HEIGHT/2},1E3,createjs.Ease.cubicOut)};this.hide=function(){createjs.Tween.get(p).to({y:a},1E3,createjs.Ease.backIn).call(function(){r.visible=!1;b[c]&&b[c].call(d[c])})};this._onHome=function(){c=ON_BACK_MENU;t.hide()};this._onRestart=function(){$(s_oMain).trigger("show_interlevel_ad");
c=ON_RESTART;t.hide()};this._init()}
function CEndPanelVsHuman(){var a,c,b,d,e,f,g,h,m,k,n,l,r,p=this;this._init=function(){b=[];d=[];l=new createjs.Container;l.visible=!1;s_oStage.addChild(l);f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);f.alpha=0;e=f.on("click",function(){});l.addChild(f);r=new createjs.Container;r.x=CANVAS_WIDTH/2;l.addChild(r);var c=s_oSpriteLibrary.getSprite("msg_box"),p=createBitmap(c);r.addChild(p);g=new createjs.Text("","70px "+FONT,"#fff");g.x=c.width/2;g.y=c.height/
2-160;g.textAlign="center";g.textBaseline="alphabetic";g.lineWidth=c.width-40;r.addChild(g);h=new createjs.Text("","50px "+FONT,"#fff");h.x=c.width/2;h.y=c.height/2+10;h.textAlign="center";h.textBaseline="alphabetic";h.lineWidth=c.width-100;r.addChild(h);m=new createjs.Text("","50px "+FONT,"#fff");m.x=c.width/2;m.y=c.height/2+70;m.textAlign="center";m.textBaseline="alphabetic";m.lineWidth=c.width-100;r.addChild(m);k=new CGfxButton(c.width/2-190,c.height/2+180,s_oSpriteLibrary.getSprite("but_home"),
r);k.addEventListener(ON_MOUSE_UP,this._onHome,this);n=new CGfxButton(c.width/2+190,c.height/2+180,s_oSpriteLibrary.getSprite("but_restart"),r);n.addEventListener(ON_MOUSE_UP,this._onRestart,this);a=-c.height/2;r.regX=c.width/2;r.regY=c.height/2};this.unload=function(){k.unload();n.unload();f.off("click",e)};this.addEventListener=function(a,c,e){b[a]=c;d[a]=e};this.show=function(b,c,d,e){playSound("game_over",1,!1);g.text=c+" "+TEXT_WINS;h.text=d[0]+" "+TEXT_SCORE+" : "+e[0];m.text=d[1]+" "+TEXT_SCORE+
" : "+e[1];f.alpha=0;r.y=a;l.visible=!0;createjs.Tween.get(f).to({alpha:.7},500);createjs.Tween.get(r).wait(400).to({y:CANVAS_HEIGHT/2},1E3,createjs.Ease.cubicOut)};this.hide=function(){createjs.Tween.get(r).to({y:a},1E3,createjs.Ease.backIn).call(function(){l.visible=!1;b[c]&&b[c].call(d[c])})};this._onHome=function(){c=ON_BACK_MENU;p.hide()};this._onRestart=function(){$(s_oMain).trigger("show_interlevel_ad");c=ON_RESTART;p.hide()};this._init()}
function CEndPanelVsCpu(){var a,c,b,d,e,f,g,h,m,k,n,l,r,p,t,u=this;this._init=function(){b=[];d=[];p=new createjs.Container;p.visible=!1;s_oStage.addChild(p);g=new createjs.Shape;g.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);g.alpha=0;e=g.on("click",function(){});p.addChild(g);t=new createjs.Container;t.x=CANVAS_WIDTH/2;p.addChild(t);f=s_oSpriteLibrary.getSprite("msg_box");var c=createBitmap(f);t.addChild(c);h=new createjs.Text("","70px "+FONT,"#fff");h.x=f.width/2;h.y=f.height/
2-160;h.textAlign="center";h.textBaseline="alphabetic";h.lineWidth=f.width-40;t.addChild(h);k=new createjs.Text("","50px "+FONT,"#fff");k.x=f.width/2;k.y=f.height/2+10;k.textAlign="center";k.textBaseline="alphabetic";k.lineWidth=f.width-100;t.addChild(k);m=new createjs.Text("","50px "+FONT,"#fff");m.x=f.width/2;m.y=f.height/2+70;m.textAlign="center";m.textBaseline="alphabetic";m.lineWidth=f.width-100;t.addChild(m);n=new CGfxButton(f.width/2-190,f.height/2+180,s_oSpriteLibrary.getSprite("but_home"),
t);n.addEventListener(ON_MOUSE_UP,this._onHome,this);l=new CGfxButton(f.width/2,f.height/2+180,s_oSpriteLibrary.getSprite("but_restart"),t);l.addEventListener(ON_MOUSE_UP,this._onRestart,this);r=new CGfxButton(f.width/2+190,f.height/2+180,s_oSpriteLibrary.getSprite("but_next"),t);r.addEventListener(ON_MOUSE_UP,this._onNext,this);a=-f.height/2;t.regX=f.width/2;t.regY=f.height/2};this.unload=function(){n.unload();l.unload();r.unload();g.off("click",e)};this.addEventListener=function(a,c,e){b[a]=c;d[a]=
e};this.show=function(b,c,d,e){0===b?(playSound("win",1,!1),e?(h.text=TEXT_CONGRATS,r.setVisible(!1),l.setX(f.width/2+190)):(h.text=TEXT_YOU_WIN,r.setVisible(!0),l.setX(f.width/2),setLocalStorageLevel(s_iCurLevel+1))):(playSound("game_over",1,!1),h.text=TEXT_YOU_LOSE,r.setVisible(!1),l.setX(f.width/2+190));k.text=TEXT_LEVEL_SCORE+" : "+c;m.text=TEXT_TOT_SCORE+" : "+d;g.alpha=0;t.y=a;p.visible=!0;createjs.Tween.get(g).to({alpha:.7},500);createjs.Tween.get(t).wait(400).to({y:CANVAS_HEIGHT/2},1E3,createjs.Ease.cubicOut)};
this.hide=function(){createjs.Tween.get(t).to({y:a},1E3,createjs.Ease.backIn).call(function(){p.visible=!1;b[c]&&b[c].call(d[c])})};this._onHome=function(){c=ON_BACK_MENU;u.hide()};this._onRestart=function(){$(s_oMain).trigger("show_interlevel_ad");c=ON_RESTART;u.hide()};this._onNext=function(){$(s_oMain).trigger("show_interlevel_ad");c=ON_NEXT;u.hide()};this._init()}
function CCreditsPanel(){var a,c,b,d,e,f,g;this._init=function(){b=new createjs.Shape;b.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);b.alpha=0;b.on("mousedown",function(){});s_oStage.addChild(b);createjs.Tween.get(b).to({alpha:.7},500);d=new createjs.Container;s_oStage.addChild(d);var h=s_oSpriteLibrary.getSprite("msg_box");g=createBitmap(h);g.regX=h.width/2;g.regY=h.height/2;d.addChild(g);c=g.on("click",this._onLogoButRelease);d.x=CANVAS_WIDTH/2;d.y=-h.height/2;a=d.y;createjs.Tween.get(d).to({y:CANVAS_HEIGHT/
2},1E3,createjs.Ease.cubicOut);h=new createjs.Text(TEXT_DEVELOPED," 40px "+FONT,"#fff");h.y=-80;h.textAlign="center";h.textBaseline="alphabetic";d.addChild(h);h=new createjs.Text("www.codethislab.com"," 36px "+FONT,"#fff");h.y=86;h.textAlign="center";h.textBaseline="middle";h.lineWidth=300;d.addChild(h);h=s_oSpriteLibrary.getSprite("ctl_logo");f=createBitmap(h);f.regX=h.width/2;f.regY=h.height/2;f.y=0;d.addChild(f);h=s_oSpriteLibrary.getSprite("but_exit");e=new CGfxButton(280,-270,h,d);e.addEventListener(ON_MOUSE_UP,
this.unload,this)};this.unload=function(){createjs.Tween.get(b).to({alpha:0},500);createjs.Tween.get(d).to({y:a},400,createjs.Ease.backIn).call(function(){s_oStage.removeChild(b);s_oStage.removeChild(d);e.unload()});b.off("mousedown",function(){});g.off("mousedown",c)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en")};this._init()}
function CAreYouSurePanel(a){var c,b,d,e,f,g,h,m,k,n,l,r=this;this._init=function(){b=[];d=[];k=new createjs.Container;k.visible=!1;p.addChild(k);n=new createjs.Shape;n.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);n.alpha=.5;e=n.on("click",function(){});k.addChild(n);l=new createjs.Container;k.addChild(l);var a=s_oSpriteLibrary.getSprite("msg_box");f=createBitmap(a);f.regX=.5*a.width;f.regY=.5*a.height;l.addChild(f);l.x=CANVAS_WIDTH/2;l.y=c=-a.height/2;g=new createjs.Text("",
"90px "+FONT,"#fff");g.x=0;g.y=-120;g.textAlign="center";g.textBaseline="middle";g.lineWidth=a.width-50;l.addChild(g);h=new CGfxButton(190,180,s_oSpriteLibrary.getSprite("but_yes"),l);h.addEventListener(ON_MOUSE_UP,this._onButYes,this);m=new CGfxButton(-170,180,s_oSpriteLibrary.getSprite("but_exit"),l);m.addEventListener(ON_MOUSE_UP,this._onButNo,this)};this.addEventListener=function(a,c,e){b[a]=c;d[a]=e};this.show=function(a,b){g.text=a;g.font=b+"px "+FONT;l.y=c;k.visible=!0;createjs.Tween.get(l).to({y:CANVAS_HEIGHT/
2},1E3,createjs.Ease.cubicOut).call(function(){s_oMain.stopUpdateNoBlock()})};this.hide=function(){s_oMain.startUpdateNoBlock();k.visible=!1};this.unload=function(){m.unload();h.unload();n.off("click",e)};this._onButYes=function(){r.hide();b[ON_BUT_YES_DOWN]&&b[ON_BUT_YES_DOWN].call(d[ON_BUT_YES_DOWN])};this._onButNo=function(){r.hide()};var p=a;this._init()}
function CMsgBox(){var a,c,b,d,e;this._init=function(){e=new createjs.Container;s_oStage.addChild(e);b=new createjs.Shape;b.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);b.alpha=.5;a=b.on("click",function(){});e.addChild(b);d=new createjs.Container;e.addChild(d);var f=s_oSpriteLibrary.getSprite("msg_box"),g=createBitmap(f);g.regX=.5*f.width;g.regY=.5*f.height;d.addChild(g);d.x=CANVAS_WIDTH/2;d.y=-f.height/2;g=new createjs.Text(TEXT_ERR_LS,"24px "+FONT,"#ffb557");g.x=0;g.y=-180;
g.textAlign="center";g.textBaseline="middle";g.lineWidth=f.width-100;d.addChild(g);c=new CGfxButton(0,160,s_oSpriteLibrary.getSprite("but_yes"),d);c.addEventListener(ON_MOUSE_UP,this._onButYes,this);createjs.Tween.get(d).to({y:CANVAS_HEIGHT/2},1E3,createjs.Ease.cubicOut)};this._onButYes=function(){c.unload();b.off("click",a);s_oStage.removeChild(e)};this._init()}
function CDart(a,c,b,d,e){var f,g,h,m,k,n,l,r=this;this._init=function(a,b,c){l=new createjs.Container;l.x=a;l.y=b;l.alpha=0;e.addChild(l);a=s_oSpriteLibrary.getSprite("contact_effect");m=createBitmap(a);m.regX=.5*a.width;m.regY=.5*a.height;m.visible=!1;m.scaleX=0;m.scaleY=0;l.addChild(m);n=createBitmap(s_oSpriteLibrary.getSprite("dart_shadow"));n.visible=!1;n.x=-50;l.addChild(n);a=[];for(b=0;b<NUM_SPRITE_DART;b++)a.push(s_oSpriteLibrary.getSprite("dart_"+c+"_"+b));c=new createjs.SpriteSheet({images:a,
frames:{width:DART_WIDTH,height:DART_HEIGHT,regX:DART_WIDTH/2,regY:DART_HEIGHT-170},animations:{start:0,anim:[0,NUM_SPRITE_DART-1,"stop_anim"],stop_anim:NUM_SPRITE_DART-1}});h=createSprite(c,"start",DART_WIDTH/2,DART_HEIGHT-170,DART_WIDTH,DART_HEIGHT);l.addChild(h);k=createBitmap(s_oSpriteLibrary.getSprite("hand_swipe"));k.x=DART_WIDTH/2;k.alpha=0;k.y=0;l.addChild(k);createjs.Tween.get(l).to({alpha:1},500,createjs.Ease.cubicOut).call(function(){r._playTweenX()})};this.unload=function(){e.removeChild(l)};
this.startAnim=function(a,b,c){createjs.Tween.removeTweens(k);l.removeChild(k);l.alpha=1;h.gotoAndPlay("anim");f=l.x+a;g=MAX_FORCE-b;createjs.Tween.get(l).to({x:f,rotation:MAX_DART_ANGLE_ROT*c},500);createjs.Tween.get(l).to({y:g},600,createjs.Ease.backOut).call(function(){n.visible=!0;n.rotation=-l.rotation;s_oGame._endThrow();r.drawCollisionPoint()});createjs.Tween.get(l).to({scaleX:.5,scaleY:.5},800,createjs.Ease.cubicOut)};this._playTweenX=function(){createjs.Tween.get(l,{loop:!0}).to({x:d.x},
TIME_DART_MOVE_X,createjs.Ease.quadInOut).to({x:a},TIME_DART_MOVE_X,createjs.Ease.quadInOut)};this.stopTween=function(){createjs.Tween.removeTweens(l)};this.drawCollisionPoint=function(){m.visible=!0;(new createjs.Tween.get(m)).to({scaleX:1,scaleY:1},1500,createjs.Ease.cubicOut).call(function(){});(new createjs.Tween.get(m)).to({alpha:0},1500,createjs.Ease.cubicOut)};this.getX=function(){return l.x};this.getY=function(){return l.y};this.getPos=function(){return{x:l.x,y:l.y}};this.getDartTip=function(){return{x:l.x,
y:l.y-DART_HEIGHT+170}};this.getNewX=function(){return f};this.getNewY=function(){return g};this.setX=function(a){l.x=a};this._init(a,c,b)}
function CVector2(a,c){var b,d;this._init=function(a,c){b=a;d=c};this.add=function(a,c){b+=a;d+=c};this.addV=function(a){b+=a.getX();d+=a.getY()};this.scalarDivision=function(a){b/=a;d/=a};this.subtract=function(a){b-=a.getX();d-=a.getY()};this.scalarProduct=function(a){b*=a;d*=a};this.invert=function(){b*=-1;d*=-1};this.dotProduct=function(a){return b*a.getX()+d*a.getY()};this.set=function(a,c){b=a;d=c};this.setV=function(a){b=a.getX();d=a.getY()};this.length=function(){return Math.sqrt(b*b+d*d)};
this.length2=function(){return b*b+d*d};this.normalize=function(){var a=this.length();0<a&&(b/=a,d/=a)};this.angleBetweenVectors=function(a){a=Math.acos(this.dotProduct(a)/(this.length()*a.length()));return!0===isNaN(a)?0:a};this.getNormalize=function(a){this.length();a.set(b,d);a.normalize()};this.rot90CCW=function(){var a=b;b=-d;d=a};this.rot90CW=function(){var a=b;b=d;d=-a};this.getRotCCW=function(a){a.set(b,d);a.rot90CCW()};this.getRotCW=function(a){a.set(b,d);a.rot90CW()};this.ceil=function(){b=
Math.ceil(b);d=Math.ceil(d)};this.round=function(){b=Math.round(b);d=Math.round(d)};this.toString=function(){return"Vector2: "+b+", "+d};this.print=function(){trace("Vector2: "+b+", "+d)};this.getX=function(){return b};this.getY=function(){return d};this.rotate=function(a){var c=b,e=d;b=c*Math.cos(a)-e*Math.sin(a);d=c*Math.sin(a)+e*Math.cos(a)};this._init(a,c)}function toRadian(a){return Math.PI/180*a}function toDegree(a){return 180/Math.PI*a}
function randRange(a,c){return Math.floor(Math.random()*(c-a+1))+a}function angleBetweenVectors(a,c){var b=Math.acos(dotProductV2(a,c)/(a.length()*c.length()));return!0===isNaN(b)?0:b}function rotateVector2D(a,c){var b=c.getX()*Math.cos(a)+c.getY()*Math.sin(a),d=c.getX()*-Math.sin(a)+c.getY()*Math.cos(a);c.set(b,d);return{x:b,y:d}}function reflectVectorV2(a,c){var b=new CVector2,d=dotProductV2(a,c);b.set(a.getX()-2*d*c.getX(),a.getY()-2*d*c.getY());return b}
function dotProductV2(a,c){return a.getX()*c.getX()+a.getY()*c.getY()}function pointInRect(a,c){return a.getX()>c.x&&a.getX()<c.x+c.width&&a.getY()>c.y&&a.getY()<c.y+c.height}function distance2(a,c){return(c.getX()-a.getX())*(c.getX()-a.getX())+(c.getY()-a.getY())*(c.getY()-a.getY())}function distance(a,c){return Math.sqrt((c.getX()-a.getX())*(c.getX()-a.getX()))+(c.getY()-a.getY())*(c.getY()-a.getY())}
function getAngle(a,c,b,d){a=b-a;c=d-c;d=Math.atan(c/a)/Math.PI*180;if(0>a||0>c)d+=180;0<a&&0>c&&(d-=180);0>d&&(d+=360);return d%360}
function CDartBoard(a,c,b,d){var e,f;this._init=function(a,b,c){f=new createjs.Container;f.x=a;f.y=b;f.regX=c.width/2;f.regY=c.height/2;d.addChild(f);e=createBitmap(c);f.addChild(e)};this.moveX=function(){createjs.Tween.get(f,{loop:!0}).to({x:a+400},3E3,createjs.Ease.cubicOut).to({x:a},3E3,createjs.Ease.cubicIn).to({x:a-400},3E3,createjs.Ease.cubicOut)};this.resetX=function(){createjs.Tween.get(f).to({x:a},1E3,createjs.Ease.cubicOut)};this.getX=function(){return f.x};this.getY=function(){return f.y};
this._init(a,c,b)}var MS_ROLLING_SCORE=750;
function CRollingScore(){var a=null,c=null;this.rolling=function(b,d,e){e>parseInt(b.text)?b.color="#3dd700":e<parseInt(b.text)&&(b.color="#d50000");a=createjs.Tween.get(b).to({text:e},MS_ROLLING_SCORE,createjs.Ease.cubicOut).call(function(){createjs.Tween.removeTweens(a);b.color="#fff"}).addEventListener("change",function(){b.text=Math.floor(b.text)});null!==d&&(c=createjs.Tween.get(d).to({text:e},MS_ROLLING_SCORE,createjs.Ease.cubicOut).call(function(){createjs.Tween.removeTweens(c)}).addEventListener("change",function(){d.text=
Math.floor(d.text)}))};return this}
function CAlertText(){var a,c;this._init=function(){c=new createjs.Container;c.x=CANVAS_WIDTH/2;c.y=CANVAS_HEIGHT/2+350;c.visible=!1;s_oStage.addChild(c);var b=new createjs.Shape;b.graphics.beginFill("rgba(0,0,0,0.7)").drawRoundRect(-200,0,400,100,10);c.addChild(b);a=new createjs.Text(""," 40px "+FONT,"#fff");a.y=54;a.lineWidth=360;a.textAlign="center";a.textBaseline="alphabetic";c.addChild(a)};this.hide=function(){c.visible=!1};this.show=function(b){createjs.Tween.hasActiveTweens(c)||(a.text=b,c.visible=
!0,c.scaleX=c.scaleY=.1,(new createjs.Tween.get(c)).to({scaleX:1,scaleY:1},600,createjs.Ease.cubicOut))};this._init()}
function CScoreText(a,c,b,d,e){var f;this._init=function(a,b,c,d){f=new createjs.Text("00000"," 80px "+FONT,d);f.textAlign="center";f.text="+"+a;f.x=b;f.y=c;f.alpha=0;f.shadow=new createjs.Shadow("#000",4,4,2);e.addChild(f);var g=this;createjs.Tween.get(f).to({alpha:1},200,createjs.Ease.quadIn).call(function(){g.moveUp()})};this.moveUp=function(){var a=f.y-400,b=this;createjs.Tween.get(f).to({y:a},1500,createjs.Ease.sineIn).call(function(){b.unload()});createjs.Tween.get(f).wait(800).to({alpha:0},
500)};this.unload=function(){e.removeChild(f)};this._init(a,c,b,d)}
function CArrowThrow(a,c,b){var d,e,f,g,h,m;this._init=function(a,b){d=new createjs.Container;d.x=a;d.y=b;d.visible=!1;k.addChild(d);var c=s_oSpriteLibrary.getSprite("arrow");f=createBitmap(c);f.regY=c.height;d.addChild(f);g=createBitmap(s_oSpriteLibrary.getSprite("arrow_fill"));g.regY=c.height;d.addChild(g);h=c.width;m=c.height;e=new createjs.Shape;e.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(f.x,f.y,h,m);e.regY=m;d.addChild(e);g.mask=e;d.regX=c.width/2};this.unload=function(){createjs.Tween.removeTweens(e);
k.removeChild(d)};this.setVisible=function(a){d.rotation=0;this.mask(0);d.visible=a};this.setAngle=function(a){d.rotation=a};this.animHelp=function(a){e.scaleX=0;createjs.Tween.get(e).to({scaleX:1},a,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(e).to({scaleX:0},a,createjs.Ease.cubicInOut).call(function(){n.animHelp(a)})})};this.setPosition=function(a,b){d.x=a;d.y=b};this.mask=function(a){e.graphics.clear();a=Math.floor(a*m/m);e.regY=a;e.graphics.beginFill("rgba(255,0,0,0.01)").drawRect(f.x,
f.y,h,a)};this.setX=function(a){d.x=a};this.setY=function(a){d.y=a};this.getX=function(){return d.x};this.getY=function(){return d.y};this.getHeight=function(){return m};var k=b;var n=this;this._init(a,c)}
function CScoreGUI(a,c,b,d,e){var f,g,h,m,k,n,l;this._init=function(a,b,c,d){f=a;g=b;l=new createjs.Container;l.x=f;l.y=g;e.addChild(l);a=new createjs.SpriteSheet({images:[c],frames:{width:c.width,height:c.height/2},animations:{on:0,off:1}});n=createSprite(a,"off",0,0,c.width,c.height/2);l.addChild(n);m=new createjs.Text(d,"38px "+FONT,"#fff");m.x=20;m.y=42;m.textAlign="left";m.textBaseline="alphabetic";l.addChild(m);h=[];c=340;for(d=0;d<NUM_THROW_PER_TURN;d++)a=new createjs.Text("0","38px "+FONT,
"#fff"),a.x=c,a.y=46,a.textAlign="center",a.textBaseline="alphabetic",l.addChild(a),h.push(a),c+=58;k=new createjs.Text(STARTING_SCORE,"44px "+FONT,"#f6ed00");k.x=510;k.y=46;k.textAlign="left";k.textBaseline="alphabetic";l.addChild(k)};this.refreshButtonPos=function(){l.x=f-s_iOffsetX;l.y=g-s_iOffsetY};this.reset=function(){for(var a=0;a<h.length;a++)h[a].text="0"};this.resetPlayerScore=function(){k.text=STARTING_SCORE};this.showTurn=function(){n.gotoAndStop("on")};this.hideTurn=function(){n.gotoAndStop("off")};
this.showNextScore=function(a,b){h[a].text=b};this.refreshPlayerScore=function(a){k.text=a};this._init(a,c,b,d)}
function CMenuMode(){var a,c,b,d,e,f,g=null,h=null,m,k,n,l,r,p,t,u;this._init=function(){u=new createjs.Container;s_oStage.addChild(u);var x=createBitmap(s_oSpriteLibrary.getSprite("bg_select_mode"));u.addChild(x);x=s_oSpriteLibrary.getSprite("but_exit");a=CANVAS_WIDTH-x.height/2-10;c=x.height/2+10;l=new CGfxButton(a,c,x,u);l.addEventListener(ON_MOUSE_UP,this._onExit,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)x=s_oSpriteLibrary.getSprite("audio_icon"),e=a-x.width/2-10,f=c,k=new CToggle(e,
f,x,s_bAudioActive,s_oStage),k.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);x=window.document;var B=x.documentElement;g=B.requestFullscreen||B.mozRequestFullScreen||B.webkitRequestFullScreen||B.msRequestFullscreen;h=x.exitFullscreen||x.mozCancelFullScreen||x.webkitExitFullscreen||x.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(g=!1);g&&screenfull.enabled&&(x=s_oSpriteLibrary.getSprite("but_fullscreen"),b=x.width/4+10,d=x.height/2+10,n=new CToggle(b,d,x,s_bFullscreen,s_oStage),n.addEventListener(ON_MOUSE_UP,
this._onFullscreenRelease,this));r=new CGfxButton(0,0,s_oSpriteLibrary.getSprite("but_single"),u);r.addEventListener(ON_MOUSE_DOWN,this._onSingle,this);p=new CGfxButton(0,0,s_oSpriteLibrary.getSprite("but_vs_cpu"),u);p.addEventListener(ON_MOUSE_DOWN,this._onVsCpu,this);t=new CGfxButton(0,0,s_oSpriteLibrary.getSprite("but_vs_human"),u);t.addEventListener(ON_MOUSE_DOWN,this._onVsHuman,this);m=new createjs.Text(TEXT_SELECT_MODE,"110px "+FONT,"#fff");m.x=CANVAS_WIDTH/2;m.y=100;m.textAlign="center";m.textBaseline=
"alphabetic";u.addChild(m);this.refreshButtonPos()};this.unload=function(){l.unload();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||k.unload();g&&screenfull.enabled&&n.unload();s_oStage.removeAllChildren();s_oModeMenu=null};this.refreshButtonPos=function(){l.setPosition(a-s_iOffsetX,c+s_iOffsetY);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||k.setPosition(e-s_iOffsetX,f+s_iOffsetY);g&&screenfull.enabled&&n.setPosition(b+s_iOffsetX,d+s_iOffsetY);s_bLandscape?(r.setPosition(CANVAS_WIDTH/2-500,CANVAS_HEIGHT/
2),p.setPosition(CANVAS_WIDTH/2,CANVAS_HEIGHT/2),t.setPosition(CANVAS_WIDTH/2+500,CANVAS_HEIGHT/2)):(r.setPosition(CANVAS_WIDTH/2,CANVAS_HEIGHT/2-400),p.setPosition(CANVAS_WIDTH/2,CANVAS_HEIGHT/2),t.setPosition(CANVAS_WIDTH/2,CANVAS_HEIGHT/2+400));m.y=r.getY()-300};this._onSingle=function(){s_oModeMenu.unload();s_oMain.modeSelected(MODE_SINGLE)};this._onVsCpu=function(){s_oModeMenu.unload();s_oMain.modeSelected(MODE_VS_CPU)};this._onVsHuman=function(){s_oModeMenu.unload();s_oMain.modeSelected(MODE_VS_HUMAN)};
this._onExit=function(){s_oModeMenu.unload();s_oMain.gotoMenu()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=function(){g&&screenfull.enabled&&n.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?h.call(window.document):g.call(window.document.documentElement);sizeHandler()};s_oModeMenu=this;this._init()}var s_oModeMenu=null;
function CLevelBut(a,c,b,d,e,f){var g,h,m,k=[],n=[],l,r,p,t;this._init=function(a,b,c,d,e){h=[];m=[];t=new createjs.Container;u.addChild(t);var f=new createjs.SpriteSheet({images:[d],frames:{width:d.width/2,height:d.height,regX:d.width/2/2,regY:d.height/2},animations:{state_true:[0],state_false:[1]}});g=e;p=createSprite(f,"state_"+g,d.width/2/2,d.height/2,d.width/2,d.height);p.mouseEnabled=e;p.x=a;p.y=b;p.stop();s_bMobile||(t.cursor="pointer");t.addChild(p);k.push(p);l=new createjs.Text(c,"60px "+
FONT,"#b40000");l.x=a;l.y=b+25;l.textAlign="center";l.textBaseline="alphabetic";l.lineWidth=200;l.outline=6;t.addChild(l);r=new createjs.Text(c,"60px "+FONT,"#fff");r.x=a;r.y=b+25;r.textAlign="center";r.textBaseline="alphabetic";r.lineWidth=200;t.addChild(r);e||(r.color="#b4b4b4",l.color="#606161");this._initListener()};this.unload=function(){t.off("mousedown",this.buttonDown);t.off("pressup",this.buttonRelease);t.removeChild(p)};this._initListener=function(){t.on("mousedown",this.buttonDown);t.on("pressup",
this.buttonRelease)};this.viewBut=function(a){t.addChild(a)};this.addEventListener=function(a,b,c){h[a]=b;m[a]=c};this.addEventListenerWithParams=function(a,b,c,d){h[a]=b;m[a]=c;n=d};this.ifClickable=function(){return!0===t.mouseEnabled?1:0};this.setActive=function(a,b){g=b;k[a].gotoAndStop("state_"+g);k[a].mouseEnabled=!0;g?(r.color="#fff",l.color="#b40000"):(r.color="#b4b4b4",l.color="#606161")};this.buttonRelease=function(){g&&(playSound("click",1,!1),h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(m[ON_MOUSE_UP],
n))};this.buttonDown=function(){h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(m[ON_MOUSE_DOWN],n)};this.setPosition=function(a,b){t.x=a;t.y=b};this.setVisible=function(a){t.visible=a};var u=f;this._init(a,c,b,d,e,f)}
function CLevelMenu(){var a,c,b,d,e,f,g,h,m,k,n,l,r,p,t,u,x,B,I,y=null,L=null;this._init=function(){g=0;B=new createjs.Container;s_oStage.addChild(B);var k=createBitmap(s_oSpriteLibrary.getSprite("bg_select_mode"));B.addChild(k);p=new createjs.Container;p.x=CANVAS_WIDTH/2;B.addChild(p);r=s_oSpriteLibrary.getSprite("bg_level_selection");k=createBitmap(r);p.addChild(k);x=new createjs.Text(TEXT_SELECT_LEVEL,"90px "+FONT,"#fff");x.x=r.width/2;x.y=100;x.textAlign="center";p.addChild(x);k=s_oSpriteLibrary.getSprite("but_exit");
e=CANVAS_WIDTH-k.width/2-10;f=k.height/2+10;t=new CGfxButton(e,f,k,s_oStage);t.addEventListener(ON_MOUSE_UP,this._onExit,this);p.regX=r.width/2;p.regY=r.height/2;h=-r.height/2;m=k.height;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)k=s_oSpriteLibrary.getSprite("audio_icon"),b=e-k.width/2-10,d=f,u=new CToggle(b,d,k,s_bAudioActive,s_oStage),u.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);k=window.document;var F=k.documentElement;y=F.requestFullscreen||F.mozRequestFullScreen||F.webkitRequestFullScreen||
F.msRequestFullscreen;L=k.exitFullscreen||k.mozCancelFullScreen||k.webkitExitFullscreen||k.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(y=!1);y&&screenfull.enabled&&(k=s_oSpriteLibrary.getSprite("but_fullscreen"),a=k.width/4+10,c=k.height/2+10,I=new CToggle(a,c,k,s_bFullscreen,s_oStage),I.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));this._checkBoundLimits();n=[];k=Math.floor((r.width-100)/NUM_COLS_PAGE_LEVEL)/2;for(var J=F=0;J<NUM_COLS_PAGE_LEVEL;J++)n.push(F),F+=2*k;l=[];this._createNewLevelPage(0,
NUM_LEVELS);this.refreshButtonPos();p.y=h;B.visible=!0;createjs.Tween.get(p).to({y:CANVAS_HEIGHT/2},1E3,createjs.Ease.cubicOut)};this.unload=function(){for(var a=0;a<k.length;a++)k[a].unload();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||u.unload();y&&screenfull.enabled&&I.unload();t.unload();s_oStage.removeAllChildren();s_oLevelMenu=null};this.refreshButtonPos=function(){t.setPosition(e-s_iOffsetX,f+s_iOffsetY);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||u.setPosition(b-s_iOffsetX,s_iOffsetY+d);y&&
screenfull.enabled&&I.setPosition(a+s_iOffsetX,c+s_iOffsetY)};this._checkBoundLimits=function(){for(var a=s_oSpriteLibrary.getSprite("but_level"),b=0,c=CANVAS_HEIGHT-2*EDGEBOARD_Y-2*m,d=0;b<c;)b+=a.height+20,d++;NUM_ROWS_PAGE_LEVEL>d&&(NUM_ROWS_PAGE_LEVEL=d);c=b=0;d=CANVAS_WIDTH-2*EDGEBOARD_X;for(a=s_oSpriteLibrary.getSprite("but_level");c<d;)c+=a.width/2+5,b++;NUM_COLS_PAGE_LEVEL>b&&(NUM_COLS_PAGE_LEVEL=b)};this._createNewLevelPage=function(a,b){var c=new createjs.Container;p.addChild(c);l.push(c);
k=[];for(var d=0,e=0,f=1,g=!1,h=s_oSpriteLibrary.getSprite("but_level"),m=a;m<b;m++){var t=new CLevelBut(n[d]+h.width/4,e+h.height/2,m+1,h,m+1>s_iLastLevel?!1:!0,c);t.addEventListenerWithParams(ON_MOUSE_UP,this._onButLevelRelease,this,m);k.push(t);d++;if(d===n.length&&(d=0,e+=h.height+70,f++,f>NUM_ROWS_PAGE_LEVEL&&m!==b-1)){g=!0;break}}c.x=r.width/2;c.y=r.height/2+100;c.regX=c.getBounds().width/2;c.regY=c.getBounds().height/2;g&&this._createNewLevelPage(m+1,b)};this._onRight=function(){l[g].visible=
!1;g++;g>=l.length&&(g=0);l[g].visible=!0};this._onLeft=function(){l[g].visible=!1;g--;0>g&&(g=l.length-1);l[g].visible=!0};this._onButLevelRelease=function(a){s_oLevelMenu.unload();s_oMain.levelSelected(a+1)};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=function(){y&&screenfull.enabled&&I.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?L.call(window.document):y.call(window.document.documentElement);
sizeHandler()};this._onExit=function(){s_oLevelMenu.unload();s_oMain.gotoModePanel()};s_oLevelMenu=this;this._init()}
var s_oLevelMenu=null,AI_INFO_HIT={double_20:{force:1320,x:960,y:530},double_1:{force:1320,x:1090,y:540},double_18:{force:1250,x:1200,y:600},double_4:{force:1160,x:1290,y:690},double_13:{force:1060,x:1355,y:810},double_6:{force:920,x:1380,y:935},double_10:{force:800,x:1355,y:1070},double_15:{force:700,x:1300,y:1185},double_2:{force:600,x:1210,y:1280},double_17:{force:520,x:1090,y:1340},double_3:{force:495,x:960,y:1360},double_19:{force:520,x:830,y:1340},double_7:{force:590,x:710,y:1280},double_16:{force:690,
x:620,y:1185},double_8:{force:800,x:565,y:1070},double_11:{force:920,x:540,y:935},double_14:{force:1060,x:565,y:810},double_9:{force:1160,x:620,y:690},double_12:{force:1250,x:710,y:600},double_5:{force:1320,x:830,y:540},20:{force:1240,x:960,y:630},1:{force:1240,x:1060,y:630},18:{force:1210,x:1160,y:650},4:{force:1150,x:1240,y:720},13:{force:1050,x:1300,y:830},6:{force:940,x:1300,y:940},10:{force:820,x:1300,y:1050},15:{force:700,x:1240,y:1150},2:{force:610,x:1170,y:1230},17:{force:580,x:1070,y:1280},
3:{force:570,x:960,y:1280},19:{force:580,x:860,y:1280},7:{force:610,x:760,y:1230},16:{force:700,x:670,y:1150},8:{force:820,x:620,y:1050},11:{force:940,x:620,y:940},14:{force:1050,x:640,y:840},9:{force:1130,x:700,y:760},12:{force:1210,x:770,y:680},5:{force:1240,x:850,y:610},triple_20:{force:1170,x:960,y:686},triple_1:{force:1150,x:1040,y:700},triple_18:{force:1115,x:1110,y:740},triple_4:{force:1070,x:1160,y:790},triple_13:{force:1E3,x:1200,y:860},triple_6:{force:920,x:1215,y:935},triple_10:{force:840,
x:1200,y:1020},triple_15:{force:765,x:1170,y:1085},triple_2:{force:710,x:1110,y:1150},triple_17:{force:670,x:1040,y:1185},triple_3:{force:660,x:960,y:1200},triple_19:{force:670,x:880,y:1185},triple_7:{force:710,x:810,y:1150},triple_16:{force:765,x:755,y:1095},triple_8:{force:840,x:720,y:1025},triple_11:{force:920,x:710,y:940},triple_14:{force:1E3,x:720,y:870},triple_9:{force:1070,x:755,y:790},triple_12:{force:1115,x:810,y:740},triple_5:{force:1150,x:880,y:700},bulls_eye:{force:920,x:960,y:940},center:{force:945,
x:960,y:910}};
function CHelpPanel(){var a,c,b,d,e,f,g=this;this._init=function(){e=new createjs.Container;e.visible=!1;s_oStage.addChild(e);var g=createBitmap(s_oSpriteLibrary.getSprite("bg_select_mode"));e.addChild(g);f=new createjs.Container;f.x=CANVAS_WIDTH/2;e.addChild(f);c=s_oSpriteLibrary.getSprite("bg_level_selection");g=createBitmap(c);f.addChild(g);b=new createjs.Text(TEXT_HELP,"36px "+FONT,"#fff");b.x=c.width/2;b.y=50;b.textAlign="center";b.lineWidth=c.width-100;b.textBaseline="alphabetic";b.lineHeight=
40;f.addChild(b);g=createBitmap(s_oSpriteLibrary.getSprite("dartboard_help"));g.x=c.width/2-450;g.y=180;f.addChild(g);g=new createjs.Text(TEXT_DOUBLE+" (X2)","32px "+FONT,"#ec0000");g.x=c.width/2-65;g.y=195;g.textAlign="left";g.textBaseline="alphabetic";f.addChild(g);g=new createjs.Text(TEXT_TRIPLE+" (X3)","32px "+FONT,"#ec0000");g.x=c.width/2+10;g.y=270;g.textAlign="left";g.textBaseline="alphabetic";f.addChild(g);g=new createjs.Text(TEXT_CENTER+" ("+POINTS_DARTBOARD_CENTER[1]+")","32px "+FONT,"#ec0000");
g.x=c.width/2+65;g.y=445;g.textAlign="left";g.textBaseline="alphabetic";f.addChild(g);g=new createjs.Text(TEXT_BULLSEYE+" ("+POINTS_DARTBOARD_CENTER[0]+")","32px "+FONT,"#ec0000");g.x=c.width/2+10;g.y=630;g.textAlign="left";g.textBaseline="alphabetic";f.addChild(g);f.regX=c.width/2;f.regY=c.height/2;a=-c.height/2;f.y=a;d=new CGfxButton(c.width/2+400,570,s_oSpriteLibrary.getSprite("but_next"),f);d.addEventListener(ON_MOUSE_UP,this._onSkip,this)};this.unload=function(){d.unload()};this.show=function(){e.alpha=
0;e.visible=!0;f.y=a;createjs.Tween.get(e).to({alpha:1},400,createjs.Ease.cubicOut);createjs.Tween.get(f).to({y:CANVAS_HEIGHT/2},1E3,createjs.Ease.cubicOut)};this.hide=function(){createjs.Tween.get(e).to({alpha:0},500,createjs.Ease.cubicOut)};this._onSkip=function(){g.hide()};this._init()}
function CGUIExpandible(a,c,b,d){var e,f,g,h,m,k,n,l;this._init=function(a,b,c,d){h=[];k=new createjs.Container;k.x=a;k.y=b;d.addChild(k);n=new createjs.Container;k.addChild(n);l=new createjs.Container;k.addChild(l);g=!1;m=new CGfxButton(0,0,c,l);m.addEventListener(ON_MOUSE_UP,this._onMenu,this);f=e=120};this.unload=function(){m.unload();d.removeChild(k)};this.refreshPos=function(){k.x=a-s_iOffsetX;k.y=c+s_iOffsetY};this.addButton=function(a){a=a.getButtonImage();a.x=0;a.y=0;a.visible=0;n.addChildAt(a,
0);h.push(a)};this._onMenu=function(){(g=!g)?r._expand():r._collapse()};this._expand=function(){for(var a=0;a<h.length;a++)h[a].visible=!0,createjs.Tween.get(h[a],{override:!0}).wait(300*a/2).to({y:e+a*f},300,createjs.Ease.cubicOut)};this._collapse=function(){for(var a=0;a<h.length;a++){var b=h[h.length-1-a];createjs.Tween.get(b,{override:!0}).wait(300*a/2).to({y:0},300,createjs.Ease.cubicOut).call(function(a){a.visible=!1},[b])}};var r=this;this._init(a,c,b,d)}
function CHelpControls(){var a,c;this._init=function(){c=new createjs.Container;c.x=CANVAS_WIDTH/2;c.y=CANVAS_HEIGHT/2-350;s_oStage.addChild(c);var b=s_oSpriteLibrary.getSprite("help_box"),d=createBitmap(b);c.addChild(d);a=new createjs.Text(TEXT_HELP_CONTROLS_1,"40px "+FONT,"#fff");a.x=b.width/2;a.y=55;a.textAlign="center";a.lineWidth=b.width-20;a.textBaseline="alphabetic";c.addChild(a);c.regX=b.width/2;c.regY=b.height/2;c.alpha=0;createjs.Tween.get(c).to({alpha:1},500,createjs.Ease.cubicOut)};this.refreshButtonPos=
function(){c.y=s_bLandscape?s_iOffsetY+c.regY+100:CANVAS_HEIGHT/2-350};this.hide=function(){createjs.Tween.get(c).to({alpha:0},400,createjs.Ease.cubicOut)};this.nextHelp=function(){a.text=TEXT_HELP_CONTROLS_2};this._init()};